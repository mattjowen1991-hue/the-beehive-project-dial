<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Trinary Dial — Mors Orbis</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --void-black: #030305;
      --shadow: #0a0a0f;
      --static: #1a1a22;
      --bone: #c8c4b8;
      --dread-red: #8b0000;
      --dread-glow: #ff2222;
      --blood: #4a0000;
      --blood-bright: #8a0000;
      --ascended-gold: #c9a227;
      --ascended-glow: #ffd700;
      --metal-dark: #1a1a1e;
      --metal-mid: #2a2a30;
      --metal-light: #3a3a42;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--void-black);
      color: var(--bone);
      font-family: 'Crimson Text', Georgia, serif;
      min-height: 100vh;
      overflow-x: hidden;
      transition: background 1s ease;
    }

    body.dread-active {
      background: #020203;
    }

    body.ascended-active {
      background: #050508;
    }

    body.shaking {
      animation: shake 0.15s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-3px) rotate(-0.5deg); }
      75% { transform: translateX(3px) rotate(0.5deg); }
    }

    /* Noise texture */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      opacity: 0.04;
      pointer-events: none;
      z-index: 1000;
    }

    /* Layout */
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 15px;
    }

    /* Header */
    header {
      text-align: center;
      padding: 10px 0 20px;
    }

    h1 {
      font-family: 'Cinzel', serif;
      font-size: clamp(1.3rem, 4vw, 1.8rem);
      font-weight: 400;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      margin-bottom: 3px;
      transition: color 0.5s ease, text-shadow 0.5s ease;
    }

    body.dread-active h1 {
      color: var(--dread-glow);
      text-shadow: 0 0 30px var(--dread-red);
    }

    body.ascended-active h1 {
      color: var(--ascended-glow);
      text-shadow: 0 0 30px var(--ascended-gold);
    }

    .subtitle {
      font-style: italic;
      color: var(--static);
      font-size: 0.85rem;
    }

    /* Mode Selection */
    .mode-selection {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    .mode-btn {
      padding: 15px;
      border: 2px solid var(--static);
      background: var(--shadow);
      color: var(--bone);
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      border-radius: 3px;
    }

    .mode-btn:hover {
      transform: translateY(-2px);
    }

    .mode-btn.dread:hover,
    .mode-btn.dread.active {
      border-color: var(--dread-red);
      background: linear-gradient(180deg, var(--blood) 0%, var(--shadow) 100%);
      color: var(--dread-glow);
      box-shadow: 0 0 25px rgba(139, 0, 0, 0.5);
    }

    .mode-btn.ascended:hover,
    .mode-btn.ascended.active {
      border-color: var(--ascended-gold);
      background: linear-gradient(180deg, rgba(201, 162, 39, 0.2) 0%, var(--shadow) 100%);
      color: var(--ascended-glow);
      box-shadow: 0 0 25px rgba(201, 162, 39, 0.4);
    }

    .mode-btn span {
      display: block;
      font-family: 'Crimson Text', serif;
      font-size: 0.75rem;
      font-style: italic;
      margin-top: 5px;
      opacity: 0.7;
    }

    /* Instruction Box */
    .instruction-box {
      background: linear-gradient(180deg, var(--shadow) 0%, var(--void-black) 100%);
      border: 1px solid var(--static);
      border-radius: 3px;
      padding: 15px 20px;
      margin-bottom: 15px;
      text-align: center;
    }

    .phase-label {
      font-family: 'Cinzel', serif;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--static);
      margin-bottom: 8px;
    }

    .instruction-text {
      font-size: 1.1rem;
      line-height: 1.4;
      margin-bottom: 8px;
    }

    .instruction-text strong {
      color: #00ff88;
    }

    body.dread-active .instruction-text strong {
      color: var(--dread-glow);
    }

    body.ascended-active .instruction-text strong {
      color: var(--ascended-glow);
    }

    .instruction-hint {
      font-size: 0.8rem;
      color: var(--static);
      font-style: italic;
    }

    /* The Dial Assembly */
    .dial-assembly {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 15px;
    }

    .dial-frame {
      position: relative;
      width: 360px;
      height: 360px;
      margin-bottom: 15px;
    }

    @media (max-width: 400px) {
      .dial-frame {
        width: 300px;
        height: 300px;
      }
    }

    /* Mobile Responsive Styles */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      
      header {
        padding: 5px 0 15px;
      }
      
      h1 {
        font-size: 1.3rem;
        letter-spacing: 0.15em;
      }
      
      .subtitle {
        font-size: 0.75rem;
      }
      
      .mode-selection {
        grid-template-columns: 1fr;
        gap: 10px;
        margin-bottom: 15px;
      }
      
      .mode-btn {
        padding: 12px;
        font-size: 1rem;
      }
      
      .mode-btn span {
        font-size: 0.7rem;
      }
      
      .instruction-panel {
        padding: 12px;
        margin-bottom: 15px;
      }
      
      .phase-label {
        font-size: 0.65rem;
      }
      
      .instruction-text {
        font-size: 1rem;
      }
      
      .instruction-hint {
        font-size: 0.75rem;
      }
      
      .dial-frame {
        width: 320px;
        height: 320px;
        margin-bottom: 10px;
      }
      
      .controls {
        padding: 12px 15px;
        gap: 15px;
      }
      
      .control-btn {
        width: 55px;
        height: 55px;
        font-size: 1.3rem;
        /* Make touch targets larger */
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      .control-btn.center-control {
        width: 65px;
        height: 65px;
        font-size: 0.65rem;
      }
      
      .control-btn svg {
        width: 20px;
        height: 20px;
      }
      
      .rotation-counter,
      .press-counter {
        gap: 6px;
        margin-top: 8px;
      }
      
      .rot-indicator,
      .press-dot {
        width: 10px;
        height: 10px;
      }
      
      .message-log {
        height: 120px;
        padding: 10px;
        font-size: 0.75rem;
      }
      
      .log-entry {
        padding: 4px 0;
      }
      
      .reset-btn {
        padding: 10px 25px;
        font-size: 0.75rem;
      }
      
      /* Catch zone adjustments for mobile */
      .catch-zone {
        width: 75px;
        height: 75px;
      }
      
      /* Call overlay mobile */
      .call-overlay {
        padding: 20px;
      }
      
      .call-message {
        font-size: 1rem;
        line-height: 1.6;
      }
      
      .dismiss-btn {
        padding: 10px 25px;
        font-size: 0.8rem;
      }
      
      /* Fail overlay mobile */
      .fail-overlay {
        padding: 20px;
      }
      
      .fail-title {
        font-size: 1.8rem;
        margin-bottom: 20px;
      }
      
      .fail-message {
        font-size: 1rem;
        line-height: 1.6;
      }
      
      .restart-btn {
        padding: 12px 30px;
        font-size: 0.85rem;
      }
    }
    
    /* Extra small screens */
    @media (max-width: 360px) {
      .dial-frame {
        width: 280px;
        height: 280px;
      }
      
      .control-btn {
        width: 50px;
        height: 50px;
      }
      
      .control-btn.center-control {
        width: 58px;
        height: 58px;
        font-size: 0.6rem;
      }
      
      .mode-btn {
        padding: 10px;
        font-size: 0.9rem;
      }
      
      h1 {
        font-size: 1.1rem;
      }
      
      .message-log {
        height: 100px;
      }
    }
    
    /* Prevent zoom on double tap for iOS */
    * {
      touch-action: manipulation;
    }
    
    /* Ensure buttons are touch-friendly */
    button {
      -webkit-tap-highlight-color: transparent;
    }

    /* Main Dial SVG */
    .dial-svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(0 5px 20px rgba(0,0,0,0.8));
    }

    /* Ring Textures and Styles */
    
    /* Outer Ring - Rough meteoric rock */
    .outer-ring-base {
      fill: url(#outerRockTexture);
      stroke: #0a0a0a;
      stroke-width: 1;
    }

    .outer-ring-edge {
      fill: none;
      stroke: url(#outerEdgeGradient);
      stroke-width: 3;
    }

    .blood-channel {
      fill: none;
      stroke: #1a0a0a;
      stroke-width: 4;
      stroke-linecap: round;
      transition: stroke 0.5s ease, filter 0.5s ease;
    }

    .blood-channel.filling {
      stroke: var(--blood);
      animation: blood-flow 0.5s ease forwards;
    }

    .blood-channel.filled {
      stroke: var(--blood-bright);
      filter: drop-shadow(0 0 4px var(--dread-red));
    }

    body.ascended-active .blood-channel.filled {
      stroke: var(--ascended-gold);
      filter: drop-shadow(0 0 4px var(--ascended-gold));
    }

    @keyframes blood-flow {
      0% { stroke-dashoffset: 50; }
      100% { stroke-dashoffset: 0; }
    }

    /* Outer ring triangle glyphs */
    .outer-glyph {
      fill: none;
      stroke: #252525;
      stroke-width: 1.5;
      transition: stroke 0.3s ease, filter 0.3s ease;
    }

    .outer-glyph.active {
      stroke: #444;
    }

    body.dread-active .outer-glyph.active {
      stroke: var(--dread-red);
      filter: drop-shadow(0 0 3px var(--dread-red));
    }

    body.ascended-active .outer-glyph.active {
      stroke: var(--ascended-gold);
      filter: drop-shadow(0 0 3px var(--ascended-gold));
    }

    /* Middle Ring - Smooth cold metal */
    .middle-ring-base {
      fill: url(#middleMetalGradient);
      stroke: #1a1a1a;
      stroke-width: 1;
    }

    .middle-ring-shine {
      fill: url(#middleShineGradient);
      opacity: 0.3;
    }

    /* Middle ring hexagon/waveform glyphs */
    .middle-glyph {
      fill: none;
      stroke: #2a2a2a;
      stroke-width: 1;
      transition: stroke 0.3s ease, filter 0.3s ease;
    }

    /* When spinning - all runes glow */
    body.dread-active.spinning .middle-glyph {
      stroke: #8B0000;
      stroke-width: 1.5;
      filter: drop-shadow(0 0 8px #8B0000);
    }
    
    body.ascended-active.spinning .middle-glyph {
      stroke: #DAA520;
      stroke-width: 1.5;
      filter: drop-shadow(0 0 8px #DAA520);
    }

    .middle-glyph.target {
      stroke: #00ff88;
      stroke-width: 2;
      filter: drop-shadow(0 0 5px #00ff88);
    }

    /* Target rune - contrasting color when spinning */
    body.dread-active .middle-glyph.target,
    body.dread-active.spinning .middle-glyph.target {
      stroke: #9932CC;
      stroke-width: 2.5;
      filter: drop-shadow(0 0 12px #9932CC) drop-shadow(0 0 20px #8A2BE2);
      animation: target-pulse-dread 0.8s ease-in-out infinite;
    }

    body.ascended-active .middle-glyph.target,
    body.ascended-active.spinning .middle-glyph.target {
      stroke: #FF4500;
      stroke-width: 2.5;
      filter: drop-shadow(0 0 12px #FF4500) drop-shadow(0 0 20px #FF6347);
      animation: target-pulse-ascended 0.8s ease-in-out infinite;
    }
    
    @keyframes target-pulse-dread {
      0%, 100% { filter: drop-shadow(0 0 12px #9932CC) drop-shadow(0 0 20px #8A2BE2); }
      50% { filter: drop-shadow(0 0 20px #9932CC) drop-shadow(0 0 35px #8A2BE2); }
    }
    
    @keyframes target-pulse-ascended {
      0%, 100% { filter: drop-shadow(0 0 12px #FF4500) drop-shadow(0 0 20px #FF6347); }
      50% { filter: drop-shadow(0 0 20px #FF4500) drop-shadow(0 0 35px #FF6347); }
    }

    .middle-glyph.aligned {
      stroke: #00ff88;
      filter: drop-shadow(0 0 8px #00ff88);
      animation: glyph-pulse 0.5s ease;
    }

    body.dread-active .middle-glyph.aligned {
      stroke: #9932CC;
      filter: drop-shadow(0 0 15px #9932CC);
    }

    body.ascended-active .middle-glyph.aligned {
      stroke: #FF4500;
      filter: drop-shadow(0 0 15px #FF4500);
    }

    @keyframes glyph-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    /* Catch zone indicator - atmospheric mist/smoke effect */
    .catch-zone {
      position: absolute;
      width: 90px;
      height: 90px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 10;
    }
    
    .catch-zone::before,
    .catch-zone::after {
      content: '';
      position: absolute;
      border-radius: 50%;
    }
    
    body.dread-active.spinning .catch-zone {
      opacity: 1;
      top: 5px;
      bottom: auto;
      left: 50%;
      transform: translateX(-50%);
    }
    
    body.dread-active.spinning .catch-zone::before {
      width: 100%;
      height: 70%;
      top: 15%;
      left: 0;
      background: 
        radial-gradient(ellipse 80% 50% at 30% 50%, rgba(153, 50, 204, 0.5) 0%, transparent 60%),
        radial-gradient(ellipse 60% 80% at 70% 40%, rgba(138, 43, 226, 0.4) 0%, transparent 50%),
        radial-gradient(ellipse 90% 40% at 50% 80%, rgba(75, 0, 130, 0.3) 0%, transparent 60%);
      filter: blur(8px);
      animation: mist-drift-dread 3s ease-in-out infinite;
    }
    
    body.dread-active.spinning .catch-zone::after {
      width: 80%;
      height: 60%;
      top: 20%;
      left: 10%;
      background: 
        radial-gradient(ellipse 70% 90% at 60% 30%, rgba(153, 50, 204, 0.6) 0%, transparent 50%),
        radial-gradient(ellipse 50% 70% at 30% 70%, rgba(138, 43, 226, 0.3) 0%, transparent 60%);
      filter: blur(6px);
      animation: mist-drift-dread 2.5s ease-in-out infinite reverse;
    }
    
    body.ascended-active.spinning .catch-zone {
      opacity: 1;
      top: 5px;
      bottom: auto;
      left: 50%;
      transform: translateX(-50%);
    }
    
    body.ascended-active.spinning .catch-zone::before {
      width: 100%;
      height: 70%;
      top: 15%;
      left: 0;
      background: 
        radial-gradient(ellipse 80% 50% at 30% 50%, rgba(255, 69, 0, 0.5) 0%, transparent 60%),
        radial-gradient(ellipse 60% 80% at 70% 40%, rgba(255, 140, 0, 0.4) 0%, transparent 50%),
        radial-gradient(ellipse 90% 40% at 50% 80%, rgba(255, 165, 0, 0.3) 0%, transparent 60%);
      filter: blur(8px);
      animation: mist-drift-ascended 3s ease-in-out infinite;
    }
    
    body.ascended-active.spinning .catch-zone::after {
      width: 80%;
      height: 60%;
      top: 20%;
      left: 10%;
      background: 
        radial-gradient(ellipse 70% 90% at 60% 30%, rgba(255, 69, 0, 0.6) 0%, transparent 50%),
        radial-gradient(ellipse 50% 70% at 30% 70%, rgba(255, 99, 71, 0.3) 0%, transparent 60%);
      filter: blur(6px);
      animation: mist-drift-ascended 2.5s ease-in-out infinite reverse;
    }
    
    @keyframes mist-drift-dread {
      0%, 100% { 
        transform: translateX(-5px) translateY(0) scale(1);
        opacity: 0.7;
      }
      33% {
        transform: translateX(5px) translateY(-3px) scale(1.1);
        opacity: 1;
      }
      66% {
        transform: translateX(-3px) translateY(3px) scale(0.95);
        opacity: 0.8;
      }
    }
    
    @keyframes mist-drift-ascended {
      0%, 100% { 
        transform: translateX(5px) translateY(0) scale(1);
        opacity: 0.7;
      }
      33% {
        transform: translateX(-5px) translateY(3px) scale(1.1);
        opacity: 1;
      }
      66% {
        transform: translateX(3px) translateY(-3px) scale(0.95);
        opacity: 0.8;
      }
    }

    /* Inner Ring - Static electricity feel */
    .inner-ring-base {
      fill: url(#innerVoidGradient);
      stroke: #151515;
      stroke-width: 1;
    }

    .inner-ring-static {
      fill: none;
      stroke: url(#staticGradient);
      stroke-width: 2;
      stroke-dasharray: 2 3;
      opacity: 0.5;
      animation: static-buzz 0.1s steps(2) infinite;
    }

    @keyframes static-buzz {
      0% { stroke-dashoffset: 0; }
      100% { stroke-dashoffset: 5; }
    }

    /* Inner ring impossible glyphs */
    .inner-glyph {
      fill: none;
      stroke: #1a1a1a;
      stroke-width: 0.75;
      transition: all 0.3s ease;
    }

    .inner-glyph.impossible {
      animation: impossible-flicker 2s ease-in-out infinite;
    }

    @keyframes impossible-flicker {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.8; }
    }

    body.dread-active .inner-glyph.active {
      stroke: var(--dread-glow);
      filter: drop-shadow(0 0 3px var(--dread-red));
    }

    body.ascended-active .inner-glyph.active {
      stroke: var(--ascended-glow);
      filter: drop-shadow(0 0 3px var(--ascended-gold));
    }

    /* Center Eye */
    .center-eye-outer {
      fill: var(--void-black);
      stroke: #1a1a1a;
      stroke-width: 2;
      transition: all 0.3s ease;
    }

    .center-eye-outer.clickable {
      cursor: pointer;
      stroke: #00ff88;
      animation: eye-beckon 1s ease-in-out infinite;
    }

    body.dread-active .center-eye-outer.clickable {
      stroke: var(--dread-glow);
    }

    body.ascended-active .center-eye-outer.clickable {
      stroke: var(--ascended-glow);
    }

    @keyframes eye-beckon {
      0%, 100% { stroke-width: 2; }
      50% { stroke-width: 4; }
    }

    .center-eye-inner {
      fill: #080808;
      transition: fill 0.5s ease, filter 0.5s ease;
    }

    .center-eye-inner.active {
      animation: eye-glow 1s ease-in-out infinite;
    }

    body.dread-active .center-eye-inner.active {
      fill: var(--dread-red);
      filter: drop-shadow(0 0 10px var(--dread-red));
    }

    body.ascended-active .center-eye-inner.active {
      fill: var(--ascended-gold);
      filter: drop-shadow(0 0 10px var(--ascended-gold));
    }

    @keyframes eye-glow {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }

    /* Alignment Marker */
    .alignment-marker {
      fill: #333;
      transition: fill 0.3s ease;
    }

    body.dread-active .alignment-marker {
      fill: var(--dread-red);
    }

    body.ascended-active .alignment-marker {
      fill: var(--ascended-gold);
    }

    /* Control Panel */
    .control-panel {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      padding: 15px 20px;
      background: var(--shadow);
      border: 1px solid var(--static);
      border-radius: 3px;
    }

    .control-btn {
      width: 60px;
      height: 60px;
      border: 2px solid var(--static);
      background: var(--void-black);
      color: var(--bone);
      font-size: 1.5rem;
      cursor: pointer;
      border-radius: 50%;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-btn:hover:not(:disabled) {
      background: var(--shadow);
      border-color: var(--bone);
      transform: scale(1.05);
    }

    .control-btn:active:not(:disabled) {
      transform: scale(0.95);
    }

    .control-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .control-btn.active {
      border-color: #00ff88;
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
    }

    body.dread-active .control-btn.active {
      border-color: var(--dread-glow);
      box-shadow: 0 0 15px rgba(255, 34, 34, 0.4);
    }

    body.ascended-active .control-btn.active {
      border-color: var(--ascended-glow);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
    }

    .control-btn.center-control {
      width: 70px;
      height: 70px;
      font-size: 0.7rem;
      font-family: 'Cinzel', serif;
      letter-spacing: 0.05em;
    }

    .control-btn svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    /* Rotation Counter */
    .rotation-counter {
      display: none;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    .rotation-counter.visible {
      display: flex;
    }

    .rot-indicator {
      width: 30px;
      height: 30px;
      border: 2px solid var(--static);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Cinzel', serif;
      font-size: 0.7rem;
      color: var(--static);
      background: var(--void-black);
      transition: all 0.3s ease;
    }

    .rot-indicator.filled {
      animation: rot-fill 0.3s ease forwards;
    }

    body.dread-active .rot-indicator.filled {
      border-color: var(--dread-glow);
      color: var(--dread-glow);
      background: var(--blood);
      box-shadow: 0 0 10px var(--dread-red);
    }

    body.ascended-active .rot-indicator.filled {
      border-color: var(--ascended-glow);
      color: var(--ascended-glow);
      background: rgba(201, 162, 39, 0.2);
      box-shadow: 0 0 10px var(--ascended-gold);
    }

    @keyframes rot-fill {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }

    /* Press Counter */
    .press-counter {
      display: none;
      justify-content: center;
      gap: 6px;
      margin-top: 10px;
    }

    .press-counter.visible {
      display: flex;
    }

    .press-dot {
      width: 14px;
      height: 14px;
      border: 1px solid var(--static);
      border-radius: 50%;
      background: var(--void-black);
      transition: all 0.2s ease;
    }

    .press-dot.filled {
      transform: scale(1.2);
    }

    body.dread-active .press-dot.filled {
      background: var(--dread-glow);
      border-color: var(--dread-glow);
      box-shadow: 0 0 8px var(--dread-red);
    }

    body.ascended-active .press-dot.filled {
      background: var(--ascended-glow);
      border-color: var(--ascended-glow);
      box-shadow: 0 0 8px var(--ascended-gold);
    }

    /* Message Log */
    .message-log {
      background: var(--shadow);
      border: 1px solid var(--static);
      border-radius: 3px;
      padding: 12px;
      max-height: 150px;
      overflow-y: auto;
      margin-bottom: 10px;
    }

    .log-title {
      font-family: 'Cinzel', serif;
      font-size: 0.65rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--static);
      margin-bottom: 8px;
    }

    .log-entry {
      padding: 6px 0;
      border-bottom: 1px solid rgba(255,255,255,0.03);
      font-size: 0.8rem;
      line-height: 1.4;
      animation: log-in 0.3s ease;
    }

    @keyframes log-in {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .log-entry:last-child { border-bottom: none; }
    .log-entry.system { color: var(--static); font-style: italic; }
    .log-entry.dread { color: var(--dread-glow); }
    .log-entry.ascended { color: var(--ascended-glow); }
    .log-entry.warning { color: #ff6b35; }
    .log-entry.danger { color: var(--dread-glow); text-shadow: 0 0 10px var(--dread-red); }
    .log-entry.holy { color: var(--ascended-glow); text-shadow: 0 0 10px var(--ascended-gold); }

    /* Reset Button */
    .reset-btn {
      display: block;
      width: 150px;
      margin: 10px auto 0;
      padding: 10px;
      border: 1px solid var(--static);
      background: transparent;
      color: var(--bone);
      font-family: 'Cinzel', serif;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      border-radius: 3px;
      transition: all 0.3s ease;
    }

    .reset-btn:hover {
      background: var(--shadow);
      border-color: var(--bone);
    }

    /* Call Overlay */
    .call-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1001;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }

    .call-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .call-overlay.dread {
      background: radial-gradient(ellipse at center, rgba(80, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.99) 100%);
    }

    .call-overlay.ascended {
      background: radial-gradient(ellipse at center, rgba(255, 250, 230, 0.95) 0%, rgba(255, 215, 0, 0.2) 100%);
    }

    .call-message {
      font-family: 'Cinzel', serif;
      font-size: clamp(1rem, 3.5vw, 1.6rem);
      text-align: center;
      padding: 30px;
      max-width: 650px;
      line-height: 1.8;
    }

    .call-overlay.dread .call-message {
      color: var(--dread-glow);
      text-shadow: 0 0 30px var(--dread-red);
      animation: dread-speak 0.2s ease-in-out infinite;
    }

    .call-overlay.ascended .call-message {
      color: #8b6914;
      text-shadow: 0 0 20px var(--ascended-glow);
    }

    @keyframes dread-speak {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.01) rotate(0.3deg); }
    }

    .dismiss-btn {
      margin-top: 25px;
      padding: 12px 35px;
      border: 2px solid currentColor;
      background: rgba(0,0,0,0.4);
      color: inherit;
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      border-radius: 3px;
      transition: all 0.3s ease;
    }

    .dismiss-btn:hover {
      background: rgba(255,255,255,0.1);
      transform: scale(1.05);
    }

    /* FAIL OVERLAY */
    .fail-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 30px;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.5s ease;
      text-align: center;
    }

    .fail-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .fail-overlay.dread {
      background: radial-gradient(ellipse at center, rgba(139, 0, 0, 0.95) 0%, rgba(50, 0, 0, 0.98) 50%, rgba(0, 0, 0, 1) 100%);
    }

    .fail-overlay.ascended {
      background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.95) 0%, rgba(200, 180, 120, 0.9) 40%, rgba(50, 40, 20, 0.98) 100%);
    }

    .fail-title {
      font-family: 'Cinzel', serif;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 30px;
      letter-spacing: 0.15em;
    }

    .fail-overlay.dread .fail-title {
      color: #ff4400;
      text-shadow: 0 0 30px #ff0000, 0 0 60px #ff4400, 0 0 90px #ff0000;
      animation: flame-flicker 0.15s ease-in-out infinite;
    }

    .fail-overlay.ascended .fail-title {
      color: #1a1a1a;
      text-shadow: 0 0 30px rgba(255, 255, 255, 0.8), 0 0 60px rgba(255, 215, 0, 0.5);
    }

    @keyframes flame-flicker {
      0%, 100% { opacity: 1; transform: scale(1); }
      25% { opacity: 0.9; transform: scale(1.02) rotate(-0.5deg); }
      50% { opacity: 1; transform: scale(0.99) rotate(0.5deg); }
      75% { opacity: 0.95; transform: scale(1.01) rotate(-0.3deg); }
    }

    .fail-message {
      font-size: 1.15rem;
      line-height: 1.8;
      max-width: 600px;
    }

    .fail-overlay.dread .fail-message {
      color: #ffccaa;
      text-shadow: 0 0 10px rgba(255, 68, 0, 0.5);
    }

    .fail-overlay.ascended .fail-message {
      color: #2a2a2a;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    }

    .restart-btn {
      margin-top: 40px;
      padding: 15px 40px;
      border: 2px solid currentColor;
      background: rgba(0,0,0,0.5);
      font-family: 'Cinzel', serif;
      font-size: 1rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      border-radius: 3px;
      transition: all 0.3s ease;
    }

    .fail-overlay.dread .restart-btn {
      color: #ff6644;
      border-color: #ff4400;
    }

    .fail-overlay.ascended .restart-btn {
      color: #3a3a3a;
      border-color: #5a5a5a;
      background: rgba(255,255,255,0.3);
    }

    .restart-btn:hover {
      transform: scale(1.05);
      background: rgba(255,255,255,0.15);
    }

    /* Body effects for fail states */
    body.fail-flames::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(ellipse at 20% 100%, rgba(255, 100, 0, 0.4) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 100%, rgba(255, 50, 0, 0.4) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 100%, rgba(255, 150, 0, 0.3) 0%, transparent 60%);
      animation: flames-dance 0.3s ease-in-out infinite;
      pointer-events: none;
      z-index: 1999;
    }

    @keyframes flames-dance {
      0%, 100% { opacity: 0.8; transform: scaleY(1); }
      50% { opacity: 1; transform: scaleY(1.05); }
    }

    body.fail-light::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.9) 0%, rgba(255, 215, 0, 0.3) 50%, transparent 80%);
      animation: light-pulse 2s ease-in-out infinite;
      pointer-events: none;
      z-index: 1999;
    }

    @keyframes light-pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }

    /* Scrollbar */
    .message-log::-webkit-scrollbar { width: 4px; }
    .message-log::-webkit-scrollbar-track { background: var(--void-black); }
    .message-log::-webkit-scrollbar-thumb { background: var(--static); border-radius: 2px; }

    /* Middle ring spinning animation */
    .middle-ring-spinning {
      animation: spin-ring 0.5s linear infinite;
    }

    @keyframes spin-ring {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Call Overlay -->
  <div class="call-overlay" id="callOverlay">
    <div class="call-message" id="callMessage"></div>
    <button class="dismiss-btn" onclick="dismissCall()">⛧ Sever Connection ⛧</button>
  </div>

  <div class="fail-overlay" id="failOverlay">
    <div class="fail-title" id="failTitle"></div>
    <div class="fail-message" id="failMessage"></div>
    <button class="restart-btn" onclick="dismissFail()">↺ Begin Anew... If You Dare ↺</button>
  </div>

  <div class="container">
    <header>
      <h1>The Trinary Dial</h1>
      <p class="subtitle">Mors Orbis — "The Death Disk"</p>
    </header>

    <!-- Mode Selection -->
    <div class="mode-selection">
      <button class="mode-btn dread" onclick="setMode('dread')">
        ⛧ Call The Dread
        <span>Widdershins • Blood • Chaos</span>
      </button>
      <button class="mode-btn ascended" onclick="setMode('ascended')">
        ✦ Call The Others
        <span>Deosil • Light • Order</span>
      </button>
    </div>

    <!-- Instruction Box -->
    <div class="instruction-box">
      <div class="phase-label" id="phaseLabel">— Awaiting Activation —</div>
      <div class="instruction-text" id="instructionText">Choose a ritual to begin the summoning.</div>
      <div class="instruction-hint" id="instructionHint">The dial hungers. The dial waits.</div>
    </div>

    <!-- The Dial Assembly -->
    <div class="dial-assembly">
      <div class="dial-frame">
        <!-- Catch Zone Indicator -->
        <div class="catch-zone" id="catchZone"></div>
        <svg class="dial-svg" viewBox="0 0 360 360" id="dialSvg">
          <defs>
            <!-- Outer Ring Rock Texture -->
            <pattern id="outerRockTexture" patternUnits="userSpaceOnUse" width="20" height="20">
              <rect width="20" height="20" fill="#0d0d0f"/>
              <circle cx="3" cy="5" r="1.5" fill="#151518"/>
              <circle cx="12" cy="3" r="2" fill="#0a0a0c"/>
              <circle cx="8" cy="12" r="1" fill="#121215"/>
              <circle cx="17" cy="9" r="1.5" fill="#0e0e10"/>
              <circle cx="5" cy="17" r="2" fill="#0b0b0d"/>
              <circle cx="15" cy="16" r="1" fill="#141417"/>
              <rect x="1" y="8" width="3" height="1" fill="#080809" transform="rotate(20 2.5 8.5)"/>
              <rect x="10" y="15" width="4" height="1" fill="#0a0a0b" transform="rotate(-15 12 15.5)"/>
            </pattern>

            <!-- Outer Ring Edge Gradient -->
            <linearGradient id="outerEdgeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#1a1a1c"/>
              <stop offset="50%" stop-color="#252528"/>
              <stop offset="100%" stop-color="#0f0f10"/>
            </linearGradient>

            <!-- Middle Ring Metal Gradient -->
            <linearGradient id="middleMetalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#1e1e22"/>
              <stop offset="30%" stop-color="#28282e"/>
              <stop offset="50%" stop-color="#2a2a30"/>
              <stop offset="70%" stop-color="#252529"/>
              <stop offset="100%" stop-color="#1a1a1e"/>
            </linearGradient>

            <!-- Middle Ring Shine -->
            <linearGradient id="middleShineGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="transparent"/>
              <stop offset="45%" stop-color="transparent"/>
              <stop offset="50%" stop-color="rgba(255,255,255,0.1)"/>
              <stop offset="55%" stop-color="transparent"/>
              <stop offset="100%" stop-color="transparent"/>
            </linearGradient>

            <!-- Inner Ring Void Gradient -->
            <radialGradient id="innerVoidGradient" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#0a0a0c"/>
              <stop offset="70%" stop-color="#080809"/>
              <stop offset="100%" stop-color="#050506"/>
            </radialGradient>

            <!-- Static Gradient for Inner Ring -->
            <linearGradient id="staticGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#2a2a30"/>
              <stop offset="25%" stop-color="#1a1a20"/>
              <stop offset="50%" stop-color="#3a3a42"/>
              <stop offset="75%" stop-color="#1a1a20"/>
              <stop offset="100%" stop-color="#2a2a30"/>
            </linearGradient>

            <!-- Glow filters -->
            <filter id="glowRed">
              <feGaussianBlur stdDeviation="3" result="blur"/>
              <feFlood flood-color="#ff2222" flood-opacity="0.5"/>
              <feComposite in2="blur" operator="in"/>
              <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>

            <filter id="glowGold">
              <feGaussianBlur stdDeviation="3" result="blur"/>
              <feFlood flood-color="#ffd700" flood-opacity="0.5"/>
              <feComposite in2="blur" operator="in"/>
              <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <!-- OUTER RING (Matter Ring) -->
          <g id="outerRing">
            <!-- Main ring body - rough rock texture -->
            <circle class="outer-ring-base" cx="180" cy="180" r="165" stroke-width="45"/>
            
            <!-- Rough edge details -->
            <circle cx="180" cy="180" r="143" fill="none" stroke="#0a0a0b" stroke-width="1"/>
            <circle cx="180" cy="180" r="187" fill="none" stroke="#151517" stroke-width="1"/>

            <!-- Blood Channels - deep scratches -->
            <g id="bloodChannels">
              <path class="blood-channel" id="bc1" d="M 180 20 Q 185 35 180 50" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc2" d="M 290 55 Q 275 70 265 85" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc3" d="M 335 165 Q 320 170 310 180" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc4" d="M 320 280 Q 305 270 290 260" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc5" d="M 200 335 Q 190 320 180 310" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc6" d="M 70 295 Q 85 280 95 265" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc7" d="M 25 195 Q 40 185 55 180" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc8" d="M 55 70 Q 70 85 85 95" stroke-dasharray="50"/>
            </g>

            <!-- Triangle Series Glyphs (9 jagged triangular shapes) -->
            <g id="outerGlyphs">
              <!-- Solid state triangles -->
              <path class="outer-glyph" id="og1" d="M 180 28 L 172 42 L 188 42 Z M 176 38 L 180 32 L 184 38"/>
              <path class="outer-glyph" id="og2" d="M 255 50 L 248 65 L 268 60 Z M 254 58 L 258 52 L 262 60"/>
              <path class="outer-glyph" id="og3" d="M 315 110 L 305 125 L 325 122 Z M 312 118 L 318 112 L 320 120"/>
              <!-- Liquid state triangles -->
              <path class="outer-glyph" id="og4" d="M 332 180 L 318 175 L 320 195 Z M 324 182 L 328 178 L 326 190"/>
              <path class="outer-glyph" id="og5" d="M 305 260 L 292 252 L 298 272 Z M 298 260 L 302 256 L 300 268"/>
              <path class="outer-glyph" id="og6" d="M 230 320 L 218 315 L 225 332 Z M 224 322 L 228 318 L 226 330"/>
              <!-- Gas state triangles -->
              <path class="outer-glyph" id="og7" d="M 130 320 L 122 305 L 142 310 Z M 130 312 L 134 308 L 136 316"/>
              <path class="outer-glyph" id="og8" d="M 55 250 L 50 235 L 70 240 Z M 56 244 L 60 238 L 64 246"/>
              <path class="outer-glyph" id="og9" d="M 35 165 L 32 150 L 52 155 Z M 38 158 L 42 152 L 48 160"/>
            </g>
          </g>

          <!-- MIDDLE RING (Frequency Ring) -->
          <g id="middleRing">
            <!-- Smooth metal base -->
            <circle class="middle-ring-base" cx="180" cy="180" r="115" stroke-width="35"/>
            
            <!-- Metallic shine overlay -->
            <circle class="middle-ring-shine" cx="180" cy="180" r="115" stroke-width="35" fill="none" stroke="url(#middleShineGradient)"/>

            <!-- Hexagon/Waveform Glyphs (6 circuit-like patterns) -->
            <g id="middleGlyphs">
              <!-- Waveform glyph 1 (top) - target for Others -->
              <g class="middle-glyph" id="mg1" data-position="0">
                <path d="M 175 72 L 180 65 L 185 72 L 180 68 Z"/>
                <path d="M 170 75 Q 175 70 180 75 Q 185 70 190 75"/>
                <line x1="175" y1="78" x2="185" y2="78"/>
              </g>
              <!-- Waveform glyph 2 -->
              <g class="middle-glyph" id="mg2" data-position="60">
                <path d="M 262 115 L 268 118 L 265 125 L 260 120 Z"/>
                <path d="M 255 112 Q 262 115 258 122 Q 265 120 262 128"/>
                <line x1="258" y1="128" x2="268" y2="122"/>
              </g>
              <!-- Waveform glyph 3 -->
              <g class="middle-glyph" id="mg3" data-position="120">
                <path d="M 265 240 L 270 248 L 262 252 L 268 245 Z"/>
                <path d="M 260 238 Q 268 242 262 250 Q 270 248 265 256"/>
                <line x1="260" y1="252" x2="270" y2="248"/>
              </g>
              <!-- Waveform glyph 4 (bottom) - target for Dread -->
              <g class="middle-glyph" id="mg4" data-position="180">
                <path d="M 175 288 L 180 295 L 185 288 L 180 292 Z"/>
                <path d="M 170 285 Q 175 290 180 285 Q 185 290 190 285"/>
                <line x1="175" y1="282" x2="185" y2="282"/>
              </g>
              <!-- Waveform glyph 5 -->
              <g class="middle-glyph" id="mg5" data-position="240">
                <path d="M 95 240 L 90 248 L 98 252 L 92 245 Z"/>
                <path d="M 100 238 Q 92 242 98 250 Q 90 248 95 256"/>
                <line x1="90" y1="248" x2="100" y2="252"/>
              </g>
              <!-- Waveform glyph 6 -->
              <g class="middle-glyph" id="mg6" data-position="300">
                <path d="M 98 115 L 92 118 L 95 125 L 100 120 Z"/>
                <path d="M 105 112 Q 98 115 102 122 Q 95 120 98 128"/>
                <line x1="92" y1="122" x2="102" y2="128"/>
              </g>
            </g>
          </g>

          <!-- INNER RING (Void Ring) -->
          <g id="innerRing">
            <!-- Void base -->
            <circle class="inner-ring-base" cx="180" cy="180" r="65" stroke-width="28"/>
            
            <!-- Static electricity effect -->
            <circle class="inner-ring-static" cx="180" cy="180" r="65" stroke-width="28"/>

            <!-- Nonagon Impossible Glyphs (9 reality-bending shapes) -->
            <g id="innerGlyphs">
              <g class="inner-glyph impossible" id="ig1">
                <path d="M 180 122 L 177 128 L 183 128 Z M 178 126 L 180 123 L 182 126 M 179 125 L 181 127"/>
              </g>
              <g class="inner-glyph impossible" id="ig2">
                <path d="M 212 132 L 215 138 L 208 136 Z M 210 134 L 214 136 M 211 137 L 213 134"/>
              </g>
              <g class="inner-glyph impossible" id="ig3">
                <path d="M 232 162 L 228 168 L 235 166 Z M 230 164 L 234 165 M 231 167 L 233 163"/>
              </g>
              <g class="inner-glyph impossible" id="ig4">
                <path d="M 232 198 L 228 192 L 235 194 Z M 230 196 L 234 195 M 231 193 L 233 197"/>
              </g>
              <g class="inner-glyph impossible" id="ig5">
                <path d="M 212 228 L 208 224 L 215 222 Z M 210 226 L 214 224 M 211 223 L 213 226"/>
              </g>
              <g class="inner-glyph impossible" id="ig6">
                <path d="M 180 238 L 183 232 L 177 232 Z M 182 234 L 180 237 L 178 234 M 181 235 L 179 233"/>
              </g>
              <g class="inner-glyph impossible" id="ig7">
                <path d="M 148 228 L 145 222 L 152 224 Z M 150 226 L 146 224 M 149 223 L 147 226"/>
              </g>
              <g class="inner-glyph impossible" id="ig8">
                <path d="M 128 198 L 132 192 L 125 194 Z M 130 196 L 126 195 M 129 193 L 127 197"/>
              </g>
              <g class="inner-glyph impossible" id="ig9">
                <path d="M 128 162 L 132 168 L 125 166 Z M 130 164 L 126 165 M 129 167 L 127 163"/>
              </g>
            </g>
          </g>

          <!-- CENTER EYE -->
          <circle class="center-eye-outer" id="centerEye" cx="180" cy="180" r="32"/>
          <circle class="center-eye-inner" id="centerEyeInner" cx="180" cy="180" r="14"/>

          <!-- ALIGNMENT MARKER (bottom) -->
          <polygon class="alignment-marker" id="alignMarker" points="180,355 175,342 185,342"/>
        </svg>
      </div>

      <!-- Control Panel -->
      <div class="control-panel">
        <button class="control-btn" id="btnLeft" onclick="rotateOuter('left')" disabled>
          <svg viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7"/></svg>
        </button>
        <button class="control-btn center-control" id="btnCenter" onclick="centerAction()" disabled>
          SPIN
        </button>
        <button class="control-btn" id="btnRight" onclick="rotateOuter('right')" disabled>
          <svg viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"/></svg>
        </button>
      </div>

      <!-- Rotation Counter -->
      <div class="rotation-counter" id="rotationCounter">
        <div class="rot-indicator" id="rot1">I</div>
        <div class="rot-indicator" id="rot2">II</div>
        <div class="rot-indicator" id="rot3">III</div>
      </div>

      <!-- Press Counter -->
      <div class="press-counter" id="pressCounter">
        <div class="press-dot" id="p1"></div>
        <div class="press-dot" id="p2"></div>
        <div class="press-dot" id="p3"></div>
        <div class="press-dot" id="p4"></div>
        <div class="press-dot" id="p5"></div>
        <div class="press-dot" id="p6"></div>
        <div class="press-dot" id="p7"></div>
        <div class="press-dot" id="p8"></div>
        <div class="press-dot" id="p9"></div>
      </div>
    </div>

    <!-- Message Log -->
    <div class="message-log">
      <div class="log-title">Manifestation Chronicle</div>
      <div id="logEntries">
        <div class="log-entry system">The dial rests in darkness, its surface cold as the void between stars...</div>
      </div>
    </div>

    <button class="reset-btn" onclick="resetDial()">↺ Reset Ritual</button>
  </div>

  <script>
    // ============== STATE ==============
    let mode = null; // 'dread' or 'ascended'
    let phase = 0; // 0: inactive, 1: outer ring, 2: middle ring spinning, 3: inner ring, 4: complete
    let outerRotation = 0;
    let middleRotation = 0;
    let rotationCount = 0;
    let pressCount = 0;
    let middleSpinning = false;
    let middleSpinInterval = null;
    let middleSpinSpeed = 0;

    // ============== AUDIO ==============
    let audioCtx = null;
    
    // GitHub Pages URLs
    const AUDIO_BASE = 'https://mattjowen1991-hue.github.io/the-beehive-project-dial/assets';
    const SOUNDS = {
      rockSliding: `${AUDIO_BASE}/Rock%20Sliding.mp3`,
      metalSwoosh: `${AUDIO_BASE}/Metal%20Swoosh.mp3`,
      lock: `${AUDIO_BASE}/lock.wav`,
      staticDread: `${AUDIO_BASE}/Static.mp3`,
      angelsOthers: `${AUDIO_BASE}/Angles.mp3`,
      flame: `${AUDIO_BASE}/flame_sound.wav`,
      wiping: `${AUDIO_BASE}/wiping_sound.wav`,
      clicks: [
        `${AUDIO_BASE}/Click%201.mp3`,
        `${AUDIO_BASE}/Click%202.mp3`,
        `${AUDIO_BASE}/Click%203.mp3`,
        `${AUDIO_BASE}/Click%204.mp3`,
        `${AUDIO_BASE}/Click%205.mp3`
      ],
      boneCracks: [
        `${AUDIO_BASE}/Bone%20Crack%202.mp3`,
        `${AUDIO_BASE}/Bone%20Crack%203.mp3`,
        `${AUDIO_BASE}/Bone%20Crack%204.mp3`,
        `${AUDIO_BASE}/Bone_Crack_1.mp3`
      ],
      chimes: [
        `${AUDIO_BASE}/Chime%201.mp3`,
        `${AUDIO_BASE}/Chime%202.mp3`,
        `${AUDIO_BASE}/Chime%203.mp3`,
        `${AUDIO_BASE}/Chime%204.mp3`
      ]
    };

    // Pre-load audio elements
    const audioCache = {};
    
    function preloadSound(name, url) {
      const audio = new Audio();
      audio.preload = 'auto';
      audio.src = url;
      audioCache[name] = audio;
      return audio;
    }
    
    // Preload all sounds
    preloadSound('rockSliding', SOUNDS.rockSliding);
    preloadSound('metalSwoosh', SOUNDS.metalSwoosh);
    preloadSound('lock', SOUNDS.lock);
    preloadSound('staticDread', SOUNDS.staticDread);
    preloadSound('angelsOthers', SOUNDS.angelsOthers);
    preloadSound('flame', SOUNDS.flame);
    preloadSound('wiping', SOUNDS.wiping);
    SOUNDS.clicks.forEach((url, i) => preloadSound(`click${i}`, url));
    SOUNDS.boneCracks.forEach((url, i) => preloadSound(`boneCrack${i}`, url));
    SOUNDS.chimes.forEach((url, i) => preloadSound(`chime${i}`, url));

    function initAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      if (audioCtx.state === 'suspended') {
        audioCtx.resume();
      }
    }

    function playSound(name, volume = 0.7) {
      initAudio();
      const cached = audioCache[name];
      if (cached) {
        const sound = cached.cloneNode();
        sound.volume = volume;
        sound.play().catch(e => console.log('Audio play failed:', e));
        return sound;
      }
    }
    
    function playRandomSound(prefix, count, volume = 0.7) {
      const index = Math.floor(Math.random() * count);
      return playSound(`${prefix}${index}`, volume);
    }

    // Sound playing functions
    function playGrind() {
      playSound('rockSliding', 0.6);
    }

    function playBoneCrack() {
      playRandomSound('boneCrack', 4, 0.8);
    }

    function playChime() {
      playRandomSound('chime', 4, 0.7);
    }

    function playMetalSpin() {
      playSound('metalSwoosh', 0.7);
    }

    function playLock() {
      playSound('lock', 0.8);
    }

    function playPress() {
      playRandomSound('click', 5, 0.6);
    }
    
    function playFinalRitual() {
      if (mode === 'dread') {
        return playSound('staticDread', 0.8);
      } else {
        return playSound('angelsOthers', 0.8);
      }
    }

    // ============== DOM ELEMENTS ==============
    
    // Track looping/stoppable sounds
    let metalSwooshSound = null;
    let finalRitualSound = null;
    let failSound = null;
    let failSoundPlaying = false;
    
    // Track missed catches
    let missCount = 0;

    // ============== UI UPDATES ==============
    function updateUI() {
      const phaseLabel = document.getElementById('phaseLabel');
      const instructionText = document.getElementById('instructionText');
      const instructionHint = document.getElementById('instructionHint');
      const btnLeft = document.getElementById('btnLeft');
      const btnRight = document.getElementById('btnRight');
      const btnCenter = document.getElementById('btnCenter');
      const rotCounter = document.getElementById('rotationCounter');
      const pressCounter = document.getElementById('pressCounter');
      const centerEye = document.getElementById('centerEye');
      const centerEyeInner = document.getElementById('centerEyeInner');

      // Reset states
      btnLeft.disabled = true;
      btnRight.disabled = true;
      btnCenter.disabled = true;
      btnLeft.classList.remove('active');
      btnRight.classList.remove('active');
      btnCenter.classList.remove('active');
      rotCounter.classList.remove('visible');
      pressCounter.classList.remove('visible');
      centerEye.classList.remove('clickable');
      centerEyeInner.classList.remove('active');

      if (!mode) {
        phaseLabel.textContent = '— Awaiting Activation —';
        instructionText.innerHTML = 'Choose a ritual to begin the summoning.';
        instructionHint.textContent = 'The dial hungers. The dial waits.';
        btnCenter.textContent = 'SPIN';
        return;
      }

      if (phase === 1) {
        phaseLabel.textContent = 'Phase 1: THE PRIME';
        rotCounter.classList.add('visible');
        
        if (mode === 'dread') {
          instructionText.innerHTML = 'Turn the Outer Ring <strong>WIDDERSHINS</strong> (counter-clockwise)';
          instructionHint.textContent = `Click the LEFT arrow. Rotation ${rotationCount}/3`;
          btnLeft.disabled = false;
          btnLeft.classList.add('active');
        } else {
          instructionText.innerHTML = 'Turn the Outer Ring <strong>DEOSIL</strong> (clockwise)';
          instructionHint.textContent = `Click the RIGHT arrow. Rotation ${rotationCount}/3`;
          btnRight.disabled = false;
          btnRight.classList.add('active');
        }
        btnCenter.textContent = 'SPIN';

      } else if (phase === 2) {
        phaseLabel.textContent = 'Phase 2: THE TUNE';
        
        if (!middleSpinning) {
          instructionText.innerHTML = 'Press <strong>SPIN</strong> to release the Frequency Ring';
          instructionHint.textContent = 'The smooth metal awaits your touch.';
          btnCenter.textContent = 'SPIN';
        } else {
          instructionText.innerHTML = 'Press <strong>CATCH</strong> to lock the alignment!';
          const targetGlyph = mode === 'dread' ? 'bottom' : 'top';
          instructionHint.textContent = `Align the glowing glyph with the ${targetGlyph} marker.`;
          btnCenter.textContent = 'CATCH';
        }
        btnCenter.disabled = false;
        btnCenter.classList.add('active');

      } else if (phase === 3) {
        phaseLabel.textContent = 'Phase 3: THE PIERCE';
        pressCounter.classList.add('visible');
        centerEye.classList.add('clickable');
        
        instructionText.innerHTML = 'Press the <strong>CENTER EYE</strong> nine times';
        instructionHint.textContent = `Press ${pressCount}/9 — ${getPressPhase()}`;
        
        btnCenter.textContent = 'PRESS';
        btnCenter.disabled = false;
        btnCenter.classList.add('active');

      } else if (phase === 4) {
        phaseLabel.textContent = '⛧ THE LOCK ⛧';
        centerEyeInner.classList.add('active');
        
        if (mode === 'dread') {
          instructionText.innerHTML = '<strong>THE DREAD SPEAKS THROUGH YOU</strong>';
          instructionHint.textContent = 'Your voice is no longer your own.';
        } else {
          instructionText.innerHTML = '<strong>THE OTHERS SING THE WORD</strong>';
          instructionHint.textContent = 'The Song fills every corner of your being.';
        }
        btnCenter.textContent = '◉';
      }
    }

    function getPressPhase() {
      if (pressCount < 3) return mode === 'dread' ? 'Decay • Death' : 'Beginning • Birth';
      if (pressCount < 6) return mode === 'dread' ? 'Chaos • Disease' : 'Balance • Body';
      return mode === 'dread' ? 'Void • Nothingness' : 'Spirit • Transcendence';
    }

    function addLog(msg, type = 'system') {
      const entries = document.getElementById('logEntries');
      const entry = document.createElement('div');
      entry.className = `log-entry ${type}`;
      entry.textContent = msg;
      entries.appendChild(entry);
      entries.parentElement.scrollTop = entries.parentElement.scrollHeight;
    }

    function shake() {
      document.body.classList.add('shaking');
      setTimeout(() => document.body.classList.remove('shaking'), 150);
    }

    // ============== MODE SELECTION ==============
    function setMode(newMode) {
      mode = newMode;
      phase = 1;
      outerRotation = 0;
      middleRotation = 0;
      rotationCount = 0;
      pressCount = 0;
      missCount = 0;
      middleSpinning = false;

      document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
      document.querySelector(`.mode-btn.${mode}`).classList.add('active');
      document.body.classList.remove('dread-active', 'ascended-active');
      document.body.classList.add(`${mode}-active`);

      // Reset visuals
      document.getElementById('outerRing').style.transform = '';
      document.getElementById('middleRing').style.transform = '';
      document.querySelectorAll('.blood-channel').forEach(c => c.classList.remove('filling', 'filled'));
      document.querySelectorAll('.outer-glyph').forEach(g => g.classList.remove('active'));
      document.querySelectorAll('.middle-glyph').forEach(g => g.classList.remove('target', 'aligned'));
      document.querySelectorAll('.rot-indicator').forEach(r => r.classList.remove('filled'));
      document.querySelectorAll('.press-dot').forEach(p => p.classList.remove('filled'));

      // Set target glyph
      const targetId = mode === 'dread' ? 'mg1' : 'mg4';
      document.getElementById(targetId).classList.add('target');

      updateUI();

      if (mode === 'dread') {
        addLog('The temperature plummets. Frost forms on the dial\'s surface.', 'dread');
        addLog('Your blood calls to the channels. The ritual begins.', 'system');
      } else {
        addLog('Light gathers at the edges of perception. The air tastes of ozone.', 'ascended');
        addLog('Surrender your ego. The ritual begins.', 'system');
      }
    }

    // ============== OUTER RING ROTATION ==============
    let isRotating = false;
    let rockSlidingSound = null;
    
    function rotateOuter(direction) {
      if (phase !== 1 || isRotating) return;

      const correctDir = (mode === 'dread' && direction === 'left') || 
                         (mode === 'ascended' && direction === 'right');
      if (!correctDir) return;

      isRotating = true;
      
      // Start rock sliding sound
      rockSlidingSound = playSound('rockSliding', 0.6);
      
      // Full rotation animation (360 degrees over ~2 seconds)
      const totalDuration = 2000; // 2 seconds for full rotation
      const steps = 36; // 36 steps = 10 degrees per step
      const stepDuration = totalDuration / steps;
      const degreesPerStep = direction === 'left' ? -10 : 10;
      
      // Rune lighting timing - light one rune at 120°, 240°, 360°
      const runeTimings = [
        { degrees: 120, runeIndex: rotationCount * 3 + 1 },
        { degrees: 240, runeIndex: rotationCount * 3 + 2 },
        { degrees: 360, runeIndex: rotationCount * 3 + 3 }
      ];
      let nextRuneIndex = 0;
      let currentStep = 0;
      
      const rotationInterval = setInterval(() => {
        currentStep++;
        outerRotation += degreesPerStep;
        
        document.getElementById('outerRing').style.transform = `rotate(${outerRotation}deg)`;
        document.getElementById('outerRing').style.transformOrigin = '180px 180px';
        
        // Check if we should light up a rune
        const degreesRotated = currentStep * Math.abs(degreesPerStep);
        if (nextRuneIndex < runeTimings.length && degreesRotated >= runeTimings[nextRuneIndex].degrees) {
          const runeNum = runeTimings[nextRuneIndex].runeIndex;
          if (runeNum <= 9) {
            // Light up the outer glyph
            document.getElementById(`og${runeNum}`).classList.add('active');
            
            // Fill blood channel
            if (runeNum <= 8) {
              document.getElementById(`bc${runeNum}`).classList.add('filled');
            }
            
            // Play bone crack or chime
            if (mode === 'dread') {
              playBoneCrack();
            } else {
              playChime();
            }
            
            shake();
          }
          nextRuneIndex++;
        }
        
        // Check if rotation is complete
        if (currentStep >= steps) {
          clearInterval(rotationInterval);
          
          // Stop rock sliding sound
          if (rockSlidingSound) {
            rockSlidingSound.pause();
            rockSlidingSound.currentTime = 0;
          }
          
          rotationCount++;
          isRotating = false;
          
          // Light up rotation indicator
          document.getElementById(`rot${rotationCount}`).classList.add('filled');
          
          if (mode === 'dread') {
            addLog(`Rotation ${rotationCount}: The bones remember. The dial drinks deep.`, 'dread');
          } else {
            addLog(`Rotation ${rotationCount}: Crystal harmonics resonate through your being.`, 'ascended');
          }

          // Check for phase completion
          if (rotationCount >= 3) {
            setTimeout(() => {
              phase = 2;
              addLog('═══════════════════════════════', 'system');
              addLog('THE PRIME IS COMPLETE.', mode);
              addLog('The blood channels overflow. The outer ring locks.', 'warning');
              updateUI();
            }, 500);
          } else {
            document.getElementById('instructionHint').textContent = 
              `Rotation ${rotationCount}/3 complete. ${3 - rotationCount} remaining.`;
          }
        }
      }, stepDuration);
    }

    // ============== MIDDLE RING SPINNING ==============
    function centerAction() {
      if (phase === 2) {
        if (!middleSpinning) {
          startMiddleSpin();
        } else {
          catchMiddleRing();
        }
      } else if (phase === 3) {
        pressInner();
      }
    }

    function startMiddleSpin() {
      middleSpinning = true;
      middleSpinSpeed = 12; // degrees per frame (balanced speed)
      
      // Add spinning class for visual effects
      document.body.classList.add('spinning');
      
      // Start looping metal swoosh sound
      startMetalSwooshLoop();
      
      addLog('The frequency ring spins freely — almost frictionless.', 'system');
      updateUI();

      middleSpinInterval = setInterval(() => {
        middleRotation = (middleRotation + middleSpinSpeed) % 360;
        document.getElementById('middleRing').style.transform = `rotate(${middleRotation}deg)`;
        document.getElementById('middleRing').style.transformOrigin = '180px 180px';

        // Gradually slow down slightly for drama
        if (middleSpinSpeed > 7) {
          middleSpinSpeed *= 0.998;
        }
      }, 16);
    }
    
    function startMetalSwooshLoop() {
      if (!middleSpinning) return; // Don't start if spinning has stopped
      
      metalSwooshSound = playSound('metalSwoosh', 0.7);
      if (metalSwooshSound) {
        metalSwooshSound.addEventListener('ended', () => {
          if (middleSpinning) {
            startMetalSwooshLoop(); // Restart when it ends, if still spinning
          }
        });
      }
    }

    function catchMiddleRing() {
      clearInterval(middleSpinInterval);
      middleSpinning = false;
      
      // Remove spinning class
      document.body.classList.remove('spinning');
      
      // Stop the metal swoosh sound
      if (metalSwooshSound) {
        metalSwooshSound.pause();
        metalSwooshSound.currentTime = 0;
        metalSwooshSound = null;
      }

      // Check alignment - target is at 0° for dread (bottom/6 o'clock), 180° for ascended (top/12 o'clock)
      const targetAngle = mode === 'dread' ? 0 : 180;
      const tolerance = 25;
      
      let diff = Math.abs(middleRotation - targetAngle);
      if (diff > 180) diff = 360 - diff;

      const aligned = diff <= tolerance;

      if (aligned) {
        playLock();
        shake();
        
        // Snap to exact position
        middleRotation = targetAngle;
        document.getElementById('middleRing').style.transform = `rotate(${middleRotation}deg)`;
        
        const targetId = mode === 'dread' ? 'mg1' : 'mg4';
        document.getElementById(targetId).classList.remove('target');
        document.getElementById(targetId).classList.add('aligned');

        addLog('═══════════════════════════════', 'system');
        addLog('ALIGNMENT ACHIEVED — The frequency locks!', mode);
        
        if (mode === 'dread') {
          addLog('The blood fuses with the mechanism. Heat builds.', 'warning');
          addLog('A scream begins inside your skull...', 'dread');
        } else {
          addLog('Harmonic resonance achieved. Light pools in the channels.', 'holy');
          addLog('A choir begins to sing from within...', 'ascended');
        }

        setTimeout(() => {
          phase = 3;
          updateUI();
        }, 800);
      } else {
        // Missed!
        missCount++;
        
        if (missCount >= 3) {
          // FAIL STATE - Too many misses
          triggerFailState();
        } else {
          // Still have attempts left
          addLog(`The ring slips through your fingers! ${3 - missCount} ${3 - missCount === 1 ? 'attempt' : 'attempts'} remaining...`, 'warning');
          middleSpinSpeed = 10;
          startMiddleSpin();
        }
      }
    }
    
    function triggerFailState() {
      phase = -1; // Failed state
      
      // Stop the metal swoosh if still playing
      if (metalSwooshSound) {
        metalSwooshSound.pause();
        metalSwooshSound.currentTime = 0;
        metalSwooshSound = null;
      }
      
      if (mode === 'dread') {
        // FLAMES - The Dread consumes you
        document.body.classList.add('fail-flames');
        startFailSoundLoop('flame');
        showFailOverlay(
          '🔥 CONSUMED BY FLAME 🔥',
          'Your trembling hands have failed you. The dial rejects your offering — but The Dread does not forgive. Fire erupts from the ancient channels, searing flesh from bone. Your screams echo through dimensions as your body becomes kindling for their eternal hunger. You are ash. You are nothing. You are theirs.',
          'dread'
        );
        addLog('═══════════════════════════════', 'system');
        addLog('Y̷O̸U̵ ̶H̵A̸V̷E̶ ̵F̴A̷I̸L̶E̵D̴.̷ ̵W̸E̴ ̶T̷A̵K̸E̵ ̴W̷H̴A̸T̷ ̶I̷S̴ ̷O̵U̶R̷S̴.̵', 'danger');
      } else {
        // LIGHT - The Others erase you
        document.body.classList.add('fail-light');
        startFailSoundLoop('wiping');
        showFailOverlay(
          '✦ ERASED FROM EXISTENCE ✦',
          'The frequency was beyond your grasp. The Others do not wait for the unworthy. Blinding light floods your vision — not warm, but absolute. Your memories dissolve first. Then your name. Then the very idea that you ever existed. Your body remains, a hollow vessel breathing in an empty room. But you? You are gone. Scattered across frequencies that will never align again.',
          'ascended'
        );
        addLog('═══════════════════════════════', 'system');
        addLog('YOU HAVE BEEN UNMADE. THE LIGHT CLAIMS ALL.', 'holy');
      }
    }
    
    function startFailSoundLoop(soundName) {
      failSoundPlaying = true;
      failSound = playSound(soundName, 0.8);
      if (failSound) {
        failSound.addEventListener('ended', () => {
          if (failSoundPlaying) {
            startFailSoundLoop(soundName);
          }
        });
      }
    }
    
    function showFailOverlay(title, message, type) {
      const overlay = document.getElementById('failOverlay');
      document.getElementById('failTitle').textContent = title;
      document.getElementById('failMessage').textContent = message;
      overlay.className = `fail-overlay ${type} active`;
    }
    
    function dismissFail() {
      // Stop the fail sound
      failSoundPlaying = false;
      if (failSound) {
        failSound.pause();
        failSound.currentTime = 0;
        failSound = null;
      }
      
      document.getElementById('failOverlay').className = 'fail-overlay';
      document.body.classList.remove('fail-flames', 'fail-light');
      
      // Reset the dial
      resetDial();
    }

    // ============== INNER RING PRESS ==============
    function pressInner() {
      if (phase !== 3) return;

      pressCount++;
      playPress();
      shake();

      document.getElementById(`p${pressCount}`).classList.add('filled');
      document.getElementById(`ig${pressCount}`).classList.add('active');

      const messages = mode === 'dread' ? [
        'A cold pulse. The void opens slightly.',
        'Darkness seeps from the dial.',
        'DECAY — Your hand fuses to the surface.',
        'Chaos energy floods your veins.',
        'Something ancient stirs.',
        'DISEASE — Blood pools beneath you.',
        'Reality tears at the edges.',
        'The whispers become screams.',
        'NOTHINGNESS — The Dread answers...'
      ] : [
        'A warm pulse. Light gathers.',
        'The Song begins, distant but beautiful.',
        'BIRTH — You feel connected to everything.',
        'Balance flows through you.',
        'Joy overwhelms your senses.',
        'BODY — You are whole.',
        'Transcendence approaches.',
        'The choir crescendos.',
        'SPIRIT — The Others sing The Word...'
      ];

      const logType = pressCount % 3 === 0 ? 'warning' : mode;
      addLog(`Press ${pressCount}: ${messages[pressCount - 1]}`, logType);

      document.getElementById('instructionHint').textContent = 
        `Press ${pressCount}/9 — ${getPressPhase()}`;

      if (pressCount >= 9) {
        setTimeout(completeLock, 500);
      }
    }

    // ============== COMPLETION ==============
    function completeLock() {
      phase = 4;
      playLock();
      shake();
      updateUI();

      addLog('═══════════════════════════════', 'system');
      addLog('THE LOCK IS COMPLETE', mode === 'dread' ? 'danger' : 'holy');

      setTimeout(() => {
        // Play the final ritual sound (Static for Dread, Angels for Others) and store reference
        startFinalRitualLoop();
        
        if (mode === 'dread') {
          showCall('W̷E̸ ̵H̷A̶V̵E̷ ̸W̶A̷I̵T̴E̸D̵.̷ ̶W̵E̶ ̴H̸A̶V̵E̶ ̷H̸U̴N̵G̶E̷R̸E̶D̵.̷ ̶Y̴O̸U̵R̶ ̷F̶L̷E̸S̵H̵ ̴I̸S̷ ̵O̴U̶R̷ ̴V̷E̸S̵S̵E̴L̵ ̶N̸O̷W̵.̸ ̷W̸E̴ ̵S̵E̷E̵ ̵T̸H̷R̶O̷U̸G̵H̶ ̸Y̴O̷U̶R̷ ̵E̷Y̸E̵S̷.̴ ̶W̷E̷ ̵S̶P̸E̸A̶K̷ ̸W̵I̷T̶H̴ ̶Y̵O̵U̷R̵ ̵T̴O̵N̵G̵U̴E̸.̷');
        } else {
          showCall('You are not alone. You have never been alone. Before the first star ignited, we sang. When the last light fades, we will still be singing. You are a note in an infinite symphony. Welcome home, beloved child of light. The Song remembers you.');
        }
      }, 1000);
    }
    
    let finalRitualPlaying = false;
    
    function startFinalRitualLoop() {
      finalRitualPlaying = true;
      finalRitualSound = playFinalRitual();
      if (finalRitualSound) {
        finalRitualSound.addEventListener('ended', () => {
          if (finalRitualPlaying) {
            startFinalRitualLoop(); // Loop until severed
          }
        });
      }
    }

    function showCall(message) {
      const overlay = document.getElementById('callOverlay');
      document.getElementById('callMessage').textContent = message;
      overlay.className = `call-overlay ${mode} active`;
    }

    function dismissCall() {
      // Stop the final ritual sound
      finalRitualPlaying = false;
      if (finalRitualSound) {
        finalRitualSound.pause();
        finalRitualSound.currentTime = 0;
        finalRitualSound = null;
      }
      
      document.getElementById('callOverlay').className = 'call-overlay';
      addLog('The connection severs. Silence returns.', 'system');
      addLog('You are forever changed.', 'warning');
    }

    // ============== RESET ==============
    function resetDial() {
      if (middleSpinInterval) clearInterval(middleSpinInterval);
      
      mode = null;
      phase = 0;
      outerRotation = 0;
      middleRotation = 0;
      rotationCount = 0;
      pressCount = 0;
      missCount = 0;
      middleSpinning = false;

      document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
      document.body.classList.remove('dread-active', 'ascended-active');

      document.getElementById('outerRing').style.transform = '';
      document.getElementById('middleRing').style.transform = '';
      document.querySelectorAll('.blood-channel').forEach(c => c.classList.remove('filling', 'filled'));
      document.querySelectorAll('.outer-glyph').forEach(g => g.classList.remove('active'));
      document.querySelectorAll('.middle-glyph').forEach(g => g.classList.remove('target', 'aligned'));
      document.querySelectorAll('.inner-glyph').forEach(g => g.classList.remove('active'));
      document.querySelectorAll('.rot-indicator').forEach(r => r.classList.remove('filled'));
      document.querySelectorAll('.press-dot').forEach(p => p.classList.remove('filled'));

      updateUI();
      document.getElementById('logEntries').innerHTML = 
        '<div class="log-entry system">The dial rests in darkness, its surface cold as the void between stars...</div>';
    }

    // Initialize
    updateUI();
  </script>
</body>
</html>
