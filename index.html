<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Trinary Dial — Mors Orbis</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --void-black: #030305;
      --shadow: #0a0a0f;
      --static: #1a1a22;
      --bone: #c8c4b8;
      --dread-red: #8b0000;
      --dread-glow: #ff2222;
      --blood: #4a0000;
      --blood-bright: #8a0000;
      --ascended-gold: #c9a227;
      --ascended-glow: #ffd700;
      --metal-dark: #1a1a1e;
      --metal-mid: #2a2a30;
      --metal-light: #3a3a42;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--void-black);
      color: var(--bone);
      font-family: 'Crimson Text', Georgia, serif;
      min-height: 100vh;
      overflow-x: hidden;
      transition: background 1s ease;
    }

    body.dread-active {
      background: #020203;
    }

    body.ascended-active {
      background: #050508;
    }

    body.shaking {
      animation: shake 0.15s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-3px) rotate(-0.5deg); }
      75% { transform: translateX(3px) rotate(0.5deg); }
    }

    /* Noise texture */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      opacity: 0.04;
      pointer-events: none;
      z-index: 1000;
    }

    /* Layout */
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 15px;
    }

    /* Header */
    header {
      text-align: center;
      padding: 10px 0 20px;
    }

    h1 {
      font-family: 'Cinzel', serif;
      font-size: clamp(1.3rem, 4vw, 1.8rem);
      font-weight: 400;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      margin-bottom: 3px;
      transition: color 0.5s ease, text-shadow 0.5s ease;
    }

    body.dread-active h1 {
      color: var(--dread-glow);
      text-shadow: 0 0 30px var(--dread-red);
    }

    body.ascended-active h1 {
      color: var(--ascended-glow);
      text-shadow: 0 0 30px var(--ascended-gold);
    }

    .subtitle {
      font-style: italic;
      color: var(--static);
      font-size: 0.85rem;
    }

    /* Mode Selection */
    .mode-selection {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    .mode-btn {
      padding: 15px;
      border: 2px solid var(--static);
      background: var(--shadow);
      color: var(--bone);
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      border-radius: 3px;
    }

    .mode-btn:hover {
      transform: translateY(-2px);
    }

    .mode-btn.dread:hover,
    .mode-btn.dread.active {
      border-color: var(--dread-red);
      background: linear-gradient(180deg, var(--blood) 0%, var(--shadow) 100%);
      color: var(--dread-glow);
      box-shadow: 0 0 25px rgba(139, 0, 0, 0.5);
    }

    .mode-btn.ascended:hover,
    .mode-btn.ascended.active {
      border-color: var(--ascended-gold);
      background: linear-gradient(180deg, rgba(201, 162, 39, 0.2) 0%, var(--shadow) 100%);
      color: var(--ascended-glow);
      box-shadow: 0 0 25px rgba(201, 162, 39, 0.4);
    }

    .mode-btn span {
      display: block;
      font-family: 'Crimson Text', serif;
      font-size: 0.75rem;
      font-style: italic;
      margin-top: 5px;
      opacity: 0.7;
    }

    /* Instruction Box */
    .instruction-box {
      background: linear-gradient(180deg, var(--shadow) 0%, var(--void-black) 100%);
      border: 1px solid var(--static);
      border-radius: 3px;
      padding: 15px 20px;
      margin-bottom: 15px;
      text-align: center;
    }

    .phase-label {
      font-family: 'Cinzel', serif;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--static);
      margin-bottom: 8px;
    }

    .instruction-text {
      font-size: 1.1rem;
      line-height: 1.4;
      margin-bottom: 8px;
    }

    .instruction-text strong {
      color: #00ff88;
    }

    body.dread-active .instruction-text strong {
      color: var(--dread-glow);
    }

    body.ascended-active .instruction-text strong {
      color: var(--ascended-glow);
    }

    .instruction-hint {
      font-size: 0.8rem;
      color: var(--static);
      font-style: italic;
    }

    /* The Dial Assembly */
    .dial-assembly {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 15px;
    }

    .dial-frame {
      position: relative;
      width: 360px;
      height: 360px;
      margin-bottom: 15px;
    }

    @media (max-width: 400px) {
      .dial-frame {
        width: 300px;
        height: 300px;
      }
    }

    /* Main Dial SVG */
    .dial-svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(0 5px 20px rgba(0,0,0,0.8));
    }

    /* Ring Textures and Styles */
    
    /* Outer Ring - Rough meteoric rock */
    .outer-ring-base {
      fill: url(#outerRockTexture);
      stroke: #0a0a0a;
      stroke-width: 1;
    }

    .outer-ring-edge {
      fill: none;
      stroke: url(#outerEdgeGradient);
      stroke-width: 3;
    }

    .blood-channel {
      fill: none;
      stroke: #1a0a0a;
      stroke-width: 4;
      stroke-linecap: round;
      transition: stroke 0.5s ease, filter 0.5s ease;
    }

    .blood-channel.filling {
      stroke: var(--blood);
      animation: blood-flow 0.5s ease forwards;
    }

    .blood-channel.filled {
      stroke: var(--blood-bright);
      filter: drop-shadow(0 0 4px var(--dread-red));
    }

    body.ascended-active .blood-channel.filled {
      stroke: var(--ascended-gold);
      filter: drop-shadow(0 0 4px var(--ascended-gold));
    }

    @keyframes blood-flow {
      0% { stroke-dashoffset: 50; }
      100% { stroke-dashoffset: 0; }
    }

    /* Outer ring triangle glyphs */
    .outer-glyph {
      fill: none;
      stroke: #252525;
      stroke-width: 1.5;
      transition: stroke 0.3s ease, filter 0.3s ease;
    }

    .outer-glyph.active {
      stroke: #444;
    }

    body.dread-active .outer-glyph.active {
      stroke: var(--dread-red);
      filter: drop-shadow(0 0 3px var(--dread-red));
    }

    body.ascended-active .outer-glyph.active {
      stroke: var(--ascended-gold);
      filter: drop-shadow(0 0 3px var(--ascended-gold));
    }

    /* Middle Ring - Smooth cold metal */
    .middle-ring-base {
      fill: url(#middleMetalGradient);
      stroke: #1a1a1a;
      stroke-width: 1;
    }

    .middle-ring-shine {
      fill: url(#middleShineGradient);
      opacity: 0.3;
    }

    /* Middle ring hexagon/waveform glyphs */
    .middle-glyph {
      fill: none;
      stroke: #2a2a2a;
      stroke-width: 1;
      transition: stroke 0.3s ease, filter 0.3s ease;
    }

    .middle-glyph.target {
      stroke: #00ff88;
      stroke-width: 1.5;
      filter: drop-shadow(0 0 5px #00ff88);
    }

    body.dread-active .middle-glyph.target {
      stroke: var(--dread-glow);
      filter: drop-shadow(0 0 5px var(--dread-red));
    }

    body.ascended-active .middle-glyph.target {
      stroke: var(--ascended-glow);
      filter: drop-shadow(0 0 5px var(--ascended-gold));
    }

    .middle-glyph.aligned {
      stroke: #00ff88;
      filter: drop-shadow(0 0 8px #00ff88);
      animation: glyph-pulse 0.5s ease;
    }

    body.dread-active .middle-glyph.aligned {
      stroke: var(--dread-glow);
      filter: drop-shadow(0 0 10px var(--dread-red));
    }

    body.ascended-active .middle-glyph.aligned {
      stroke: var(--ascended-glow);
      filter: drop-shadow(0 0 10px var(--ascended-gold));
    }

    @keyframes glyph-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Inner Ring - Static electricity feel */
    .inner-ring-base {
      fill: url(#innerVoidGradient);
      stroke: #151515;
      stroke-width: 1;
    }

    .inner-ring-static {
      fill: none;
      stroke: url(#staticGradient);
      stroke-width: 2;
      stroke-dasharray: 2 3;
      opacity: 0.5;
      animation: static-buzz 0.1s steps(2) infinite;
    }

    @keyframes static-buzz {
      0% { stroke-dashoffset: 0; }
      100% { stroke-dashoffset: 5; }
    }

    /* Inner ring impossible glyphs */
    .inner-glyph {
      fill: none;
      stroke: #1a1a1a;
      stroke-width: 0.75;
      transition: all 0.3s ease;
    }

    .inner-glyph.impossible {
      animation: impossible-flicker 2s ease-in-out infinite;
    }

    @keyframes impossible-flicker {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.8; }
    }

    body.dread-active .inner-glyph.active {
      stroke: var(--dread-glow);
      filter: drop-shadow(0 0 3px var(--dread-red));
    }

    body.ascended-active .inner-glyph.active {
      stroke: var(--ascended-glow);
      filter: drop-shadow(0 0 3px var(--ascended-gold));
    }

    /* Center Eye */
    .center-eye-outer {
      fill: var(--void-black);
      stroke: #1a1a1a;
      stroke-width: 2;
      transition: all 0.3s ease;
    }

    .center-eye-outer.clickable {
      cursor: pointer;
      stroke: #00ff88;
      animation: eye-beckon 1s ease-in-out infinite;
    }

    body.dread-active .center-eye-outer.clickable {
      stroke: var(--dread-glow);
    }

    body.ascended-active .center-eye-outer.clickable {
      stroke: var(--ascended-glow);
    }

    @keyframes eye-beckon {
      0%, 100% { stroke-width: 2; }
      50% { stroke-width: 4; }
    }

    .center-eye-inner {
      fill: #080808;
      transition: fill 0.5s ease, filter 0.5s ease;
    }

    .center-eye-inner.active {
      animation: eye-glow 1s ease-in-out infinite;
    }

    body.dread-active .center-eye-inner.active {
      fill: var(--dread-red);
      filter: drop-shadow(0 0 10px var(--dread-red));
    }

    body.ascended-active .center-eye-inner.active {
      fill: var(--ascended-gold);
      filter: drop-shadow(0 0 10px var(--ascended-gold));
    }

    @keyframes eye-glow {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }

    /* Alignment Marker */
    .alignment-marker {
      fill: #333;
      transition: fill 0.3s ease;
    }

    body.dread-active .alignment-marker {
      fill: var(--dread-red);
    }

    body.ascended-active .alignment-marker {
      fill: var(--ascended-gold);
    }

    /* Control Panel */
    .control-panel {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      padding: 15px 20px;
      background: var(--shadow);
      border: 1px solid var(--static);
      border-radius: 3px;
    }

    .control-btn {
      width: 60px;
      height: 60px;
      border: 2px solid var(--static);
      background: var(--void-black);
      color: var(--bone);
      font-size: 1.5rem;
      cursor: pointer;
      border-radius: 50%;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-btn:hover:not(:disabled) {
      background: var(--shadow);
      border-color: var(--bone);
      transform: scale(1.05);
    }

    .control-btn:active:not(:disabled) {
      transform: scale(0.95);
    }

    .control-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .control-btn.active {
      border-color: #00ff88;
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
    }

    body.dread-active .control-btn.active {
      border-color: var(--dread-glow);
      box-shadow: 0 0 15px rgba(255, 34, 34, 0.4);
    }

    body.ascended-active .control-btn.active {
      border-color: var(--ascended-glow);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
    }

    .control-btn.center-control {
      width: 70px;
      height: 70px;
      font-size: 0.7rem;
      font-family: 'Cinzel', serif;
      letter-spacing: 0.05em;
    }

    .control-btn svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    /* Rotation Counter */
    .rotation-counter {
      display: none;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    .rotation-counter.visible {
      display: flex;
    }

    .rot-indicator {
      width: 30px;
      height: 30px;
      border: 2px solid var(--static);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Cinzel', serif;
      font-size: 0.7rem;
      color: var(--static);
      background: var(--void-black);
      transition: all 0.3s ease;
    }

    .rot-indicator.filled {
      animation: rot-fill 0.3s ease forwards;
    }

    body.dread-active .rot-indicator.filled {
      border-color: var(--dread-glow);
      color: var(--dread-glow);
      background: var(--blood);
      box-shadow: 0 0 10px var(--dread-red);
    }

    body.ascended-active .rot-indicator.filled {
      border-color: var(--ascended-glow);
      color: var(--ascended-glow);
      background: rgba(201, 162, 39, 0.2);
      box-shadow: 0 0 10px var(--ascended-gold);
    }

    @keyframes rot-fill {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }

    /* Press Counter */
    .press-counter {
      display: none;
      justify-content: center;
      gap: 6px;
      margin-top: 10px;
    }

    .press-counter.visible {
      display: flex;
    }

    .press-dot {
      width: 14px;
      height: 14px;
      border: 1px solid var(--static);
      border-radius: 50%;
      background: var(--void-black);
      transition: all 0.2s ease;
    }

    .press-dot.filled {
      transform: scale(1.2);
    }

    body.dread-active .press-dot.filled {
      background: var(--dread-glow);
      border-color: var(--dread-glow);
      box-shadow: 0 0 8px var(--dread-red);
    }

    body.ascended-active .press-dot.filled {
      background: var(--ascended-glow);
      border-color: var(--ascended-glow);
      box-shadow: 0 0 8px var(--ascended-gold);
    }

    /* Message Log */
    .message-log {
      background: var(--shadow);
      border: 1px solid var(--static);
      border-radius: 3px;
      padding: 12px;
      max-height: 150px;
      overflow-y: auto;
      margin-bottom: 10px;
    }

    .log-title {
      font-family: 'Cinzel', serif;
      font-size: 0.65rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--static);
      margin-bottom: 8px;
    }

    .log-entry {
      padding: 6px 0;
      border-bottom: 1px solid rgba(255,255,255,0.03);
      font-size: 0.8rem;
      line-height: 1.4;
      animation: log-in 0.3s ease;
    }

    @keyframes log-in {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .log-entry:last-child { border-bottom: none; }
    .log-entry.system { color: var(--static); font-style: italic; }
    .log-entry.dread { color: var(--dread-glow); }
    .log-entry.ascended { color: var(--ascended-glow); }
    .log-entry.warning { color: #ff6b35; }
    .log-entry.danger { color: var(--dread-glow); text-shadow: 0 0 10px var(--dread-red); }
    .log-entry.holy { color: var(--ascended-glow); text-shadow: 0 0 10px var(--ascended-gold); }

    /* Reset Button */
    .reset-btn {
      display: block;
      width: 150px;
      margin: 10px auto 0;
      padding: 10px;
      border: 1px solid var(--static);
      background: transparent;
      color: var(--bone);
      font-family: 'Cinzel', serif;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      border-radius: 3px;
      transition: all 0.3s ease;
    }

    .reset-btn:hover {
      background: var(--shadow);
      border-color: var(--bone);
    }

    /* Call Overlay */
    .call-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1001;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }

    .call-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .call-overlay.dread {
      background: radial-gradient(ellipse at center, rgba(80, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.99) 100%);
    }

    .call-overlay.ascended {
      background: radial-gradient(ellipse at center, rgba(255, 250, 230, 0.95) 0%, rgba(255, 215, 0, 0.2) 100%);
    }

    .call-message {
      font-family: 'Cinzel', serif;
      font-size: clamp(1rem, 3.5vw, 1.6rem);
      text-align: center;
      padding: 30px;
      max-width: 650px;
      line-height: 1.8;
    }

    .call-overlay.dread .call-message {
      color: var(--dread-glow);
      text-shadow: 0 0 30px var(--dread-red);
      animation: dread-speak 0.2s ease-in-out infinite;
    }

    .call-overlay.ascended .call-message {
      color: #8b6914;
      text-shadow: 0 0 20px var(--ascended-glow);
    }

    @keyframes dread-speak {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.01) rotate(0.3deg); }
    }

    .dismiss-btn {
      margin-top: 25px;
      padding: 12px 35px;
      border: 2px solid currentColor;
      background: rgba(0,0,0,0.4);
      color: inherit;
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      border-radius: 3px;
      transition: all 0.3s ease;
    }

    .dismiss-btn:hover {
      background: rgba(255,255,255,0.1);
      transform: scale(1.05);
    }

    /* Scrollbar */
    .message-log::-webkit-scrollbar { width: 4px; }
    .message-log::-webkit-scrollbar-track { background: var(--void-black); }
    .message-log::-webkit-scrollbar-thumb { background: var(--static); border-radius: 2px; }

    /* Middle ring spinning animation */
    .middle-ring-spinning {
      animation: spin-ring 0.5s linear infinite;
    }

    @keyframes spin-ring {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Call Overlay -->
  <div class="call-overlay" id="callOverlay">
    <div class="call-message" id="callMessage"></div>
    <button class="dismiss-btn" onclick="dismissCall()">⛧ Sever Connection ⛧</button>
  </div>

  <div class="container">
    <header>
      <h1>The Trinary Dial</h1>
      <p class="subtitle">Mors Orbis — "The Death Disk"</p>
    </header>

    <!-- Mode Selection -->
    <div class="mode-selection">
      <button class="mode-btn dread" onclick="setMode('dread')">
        ⛧ Call The Dread
        <span>Widdershins • Blood • Chaos</span>
      </button>
      <button class="mode-btn ascended" onclick="setMode('ascended')">
        ✦ Call The Others
        <span>Deosil • Light • Order</span>
      </button>
    </div>

    <!-- Instruction Box -->
    <div class="instruction-box">
      <div class="phase-label" id="phaseLabel">— Awaiting Activation —</div>
      <div class="instruction-text" id="instructionText">Choose a ritual to begin the summoning.</div>
      <div class="instruction-hint" id="instructionHint">The dial hungers. The dial waits.</div>
    </div>

    <!-- The Dial Assembly -->
    <div class="dial-assembly">
      <div class="dial-frame">
        <svg class="dial-svg" viewBox="0 0 360 360" id="dialSvg">
          <defs>
            <!-- Outer Ring Rock Texture -->
            <pattern id="outerRockTexture" patternUnits="userSpaceOnUse" width="20" height="20">
              <rect width="20" height="20" fill="#0d0d0f"/>
              <circle cx="3" cy="5" r="1.5" fill="#151518"/>
              <circle cx="12" cy="3" r="2" fill="#0a0a0c"/>
              <circle cx="8" cy="12" r="1" fill="#121215"/>
              <circle cx="17" cy="9" r="1.5" fill="#0e0e10"/>
              <circle cx="5" cy="17" r="2" fill="#0b0b0d"/>
              <circle cx="15" cy="16" r="1" fill="#141417"/>
              <rect x="1" y="8" width="3" height="1" fill="#080809" transform="rotate(20 2.5 8.5)"/>
              <rect x="10" y="15" width="4" height="1" fill="#0a0a0b" transform="rotate(-15 12 15.5)"/>
            </pattern>

            <!-- Outer Ring Edge Gradient -->
            <linearGradient id="outerEdgeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#1a1a1c"/>
              <stop offset="50%" stop-color="#252528"/>
              <stop offset="100%" stop-color="#0f0f10"/>
            </linearGradient>

            <!-- Middle Ring Metal Gradient -->
            <linearGradient id="middleMetalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#1e1e22"/>
              <stop offset="30%" stop-color="#28282e"/>
              <stop offset="50%" stop-color="#2a2a30"/>
              <stop offset="70%" stop-color="#252529"/>
              <stop offset="100%" stop-color="#1a1a1e"/>
            </linearGradient>

            <!-- Middle Ring Shine -->
            <linearGradient id="middleShineGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="transparent"/>
              <stop offset="45%" stop-color="transparent"/>
              <stop offset="50%" stop-color="rgba(255,255,255,0.1)"/>
              <stop offset="55%" stop-color="transparent"/>
              <stop offset="100%" stop-color="transparent"/>
            </linearGradient>

            <!-- Inner Ring Void Gradient -->
            <radialGradient id="innerVoidGradient" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#0a0a0c"/>
              <stop offset="70%" stop-color="#080809"/>
              <stop offset="100%" stop-color="#050506"/>
            </radialGradient>

            <!-- Static Gradient for Inner Ring -->
            <linearGradient id="staticGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#2a2a30"/>
              <stop offset="25%" stop-color="#1a1a20"/>
              <stop offset="50%" stop-color="#3a3a42"/>
              <stop offset="75%" stop-color="#1a1a20"/>
              <stop offset="100%" stop-color="#2a2a30"/>
            </linearGradient>

            <!-- Glow filters -->
            <filter id="glowRed">
              <feGaussianBlur stdDeviation="3" result="blur"/>
              <feFlood flood-color="#ff2222" flood-opacity="0.5"/>
              <feComposite in2="blur" operator="in"/>
              <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>

            <filter id="glowGold">
              <feGaussianBlur stdDeviation="3" result="blur"/>
              <feFlood flood-color="#ffd700" flood-opacity="0.5"/>
              <feComposite in2="blur" operator="in"/>
              <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <!-- OUTER RING (Matter Ring) -->
          <g id="outerRing">
            <!-- Main ring body - rough rock texture -->
            <circle class="outer-ring-base" cx="180" cy="180" r="165" stroke-width="45"/>
            
            <!-- Rough edge details -->
            <circle cx="180" cy="180" r="143" fill="none" stroke="#0a0a0b" stroke-width="1"/>
            <circle cx="180" cy="180" r="187" fill="none" stroke="#151517" stroke-width="1"/>

            <!-- Blood Channels - deep scratches -->
            <g id="bloodChannels">
              <path class="blood-channel" id="bc1" d="M 180 20 Q 185 35 180 50" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc2" d="M 290 55 Q 275 70 265 85" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc3" d="M 335 165 Q 320 170 310 180" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc4" d="M 320 280 Q 305 270 290 260" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc5" d="M 200 335 Q 190 320 180 310" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc6" d="M 70 295 Q 85 280 95 265" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc7" d="M 25 195 Q 40 185 55 180" stroke-dasharray="50"/>
              <path class="blood-channel" id="bc8" d="M 55 70 Q 70 85 85 95" stroke-dasharray="50"/>
            </g>

            <!-- Triangle Series Glyphs (9 jagged triangular shapes) -->
            <g id="outerGlyphs">
              <!-- Solid state triangles -->
              <path class="outer-glyph" id="og1" d="M 180 28 L 172 42 L 188 42 Z M 176 38 L 180 32 L 184 38"/>
              <path class="outer-glyph" id="og2" d="M 255 50 L 248 65 L 268 60 Z M 254 58 L 258 52 L 262 60"/>
              <path class="outer-glyph" id="og3" d="M 315 110 L 305 125 L 325 122 Z M 312 118 L 318 112 L 320 120"/>
              <!-- Liquid state triangles -->
              <path class="outer-glyph" id="og4" d="M 332 180 L 318 175 L 320 195 Z M 324 182 L 328 178 L 326 190"/>
              <path class="outer-glyph" id="og5" d="M 305 260 L 292 252 L 298 272 Z M 298 260 L 302 256 L 300 268"/>
              <path class="outer-glyph" id="og6" d="M 230 320 L 218 315 L 225 332 Z M 224 322 L 228 318 L 226 330"/>
              <!-- Gas state triangles -->
              <path class="outer-glyph" id="og7" d="M 130 320 L 122 305 L 142 310 Z M 130 312 L 134 308 L 136 316"/>
              <path class="outer-glyph" id="og8" d="M 55 250 L 50 235 L 70 240 Z M 56 244 L 60 238 L 64 246"/>
              <path class="outer-glyph" id="og9" d="M 35 165 L 32 150 L 52 155 Z M 38 158 L 42 152 L 48 160"/>
            </g>
          </g>

          <!-- MIDDLE RING (Frequency Ring) -->
          <g id="middleRing">
            <!-- Smooth metal base -->
            <circle class="middle-ring-base" cx="180" cy="180" r="115" stroke-width="35"/>
            
            <!-- Metallic shine overlay -->
            <circle class="middle-ring-shine" cx="180" cy="180" r="115" stroke-width="35" fill="none" stroke="url(#middleShineGradient)"/>

            <!-- Hexagon/Waveform Glyphs (6 circuit-like patterns) -->
            <g id="middleGlyphs">
              <!-- Waveform glyph 1 (top) - target for Others -->
              <g class="middle-glyph" id="mg1" data-position="0">
                <path d="M 175 72 L 180 65 L 185 72 L 180 68 Z"/>
                <path d="M 170 75 Q 175 70 180 75 Q 185 70 190 75"/>
                <line x1="175" y1="78" x2="185" y2="78"/>
              </g>
              <!-- Waveform glyph 2 -->
              <g class="middle-glyph" id="mg2" data-position="60">
                <path d="M 262 115 L 268 118 L 265 125 L 260 120 Z"/>
                <path d="M 255 112 Q 262 115 258 122 Q 265 120 262 128"/>
                <line x1="258" y1="128" x2="268" y2="122"/>
              </g>
              <!-- Waveform glyph 3 -->
              <g class="middle-glyph" id="mg3" data-position="120">
                <path d="M 265 240 L 270 248 L 262 252 L 268 245 Z"/>
                <path d="M 260 238 Q 268 242 262 250 Q 270 248 265 256"/>
                <line x1="260" y1="252" x2="270" y2="248"/>
              </g>
              <!-- Waveform glyph 4 (bottom) - target for Dread -->
              <g class="middle-glyph" id="mg4" data-position="180">
                <path d="M 175 288 L 180 295 L 185 288 L 180 292 Z"/>
                <path d="M 170 285 Q 175 290 180 285 Q 185 290 190 285"/>
                <line x1="175" y1="282" x2="185" y2="282"/>
              </g>
              <!-- Waveform glyph 5 -->
              <g class="middle-glyph" id="mg5" data-position="240">
                <path d="M 95 240 L 90 248 L 98 252 L 92 245 Z"/>
                <path d="M 100 238 Q 92 242 98 250 Q 90 248 95 256"/>
                <line x1="90" y1="248" x2="100" y2="252"/>
              </g>
              <!-- Waveform glyph 6 -->
              <g class="middle-glyph" id="mg6" data-position="300">
                <path d="M 98 115 L 92 118 L 95 125 L 100 120 Z"/>
                <path d="M 105 112 Q 98 115 102 122 Q 95 120 98 128"/>
                <line x1="92" y1="122" x2="102" y2="128"/>
              </g>
            </g>
          </g>

          <!-- INNER RING (Void Ring) -->
          <g id="innerRing">
            <!-- Void base -->
            <circle class="inner-ring-base" cx="180" cy="180" r="65" stroke-width="28"/>
            
            <!-- Static electricity effect -->
            <circle class="inner-ring-static" cx="180" cy="180" r="65" stroke-width="28"/>

            <!-- Nonagon Impossible Glyphs (9 reality-bending shapes) -->
            <g id="innerGlyphs">
              <g class="inner-glyph impossible" id="ig1">
                <path d="M 180 122 L 177 128 L 183 128 Z M 178 126 L 180 123 L 182 126 M 179 125 L 181 127"/>
              </g>
              <g class="inner-glyph impossible" id="ig2">
                <path d="M 212 132 L 215 138 L 208 136 Z M 210 134 L 214 136 M 211 137 L 213 134"/>
              </g>
              <g class="inner-glyph impossible" id="ig3">
                <path d="M 232 162 L 228 168 L 235 166 Z M 230 164 L 234 165 M 231 167 L 233 163"/>
              </g>
              <g class="inner-glyph impossible" id="ig4">
                <path d="M 232 198 L 228 192 L 235 194 Z M 230 196 L 234 195 M 231 193 L 233 197"/>
              </g>
              <g class="inner-glyph impossible" id="ig5">
                <path d="M 212 228 L 208 224 L 215 222 Z M 210 226 L 214 224 M 211 223 L 213 226"/>
              </g>
              <g class="inner-glyph impossible" id="ig6">
                <path d="M 180 238 L 183 232 L 177 232 Z M 182 234 L 180 237 L 178 234 M 181 235 L 179 233"/>
              </g>
              <g class="inner-glyph impossible" id="ig7">
                <path d="M 148 228 L 145 222 L 152 224 Z M 150 226 L 146 224 M 149 223 L 147 226"/>
              </g>
              <g class="inner-glyph impossible" id="ig8">
                <path d="M 128 198 L 132 192 L 125 194 Z M 130 196 L 126 195 M 129 193 L 127 197"/>
              </g>
              <g class="inner-glyph impossible" id="ig9">
                <path d="M 128 162 L 132 168 L 125 166 Z M 130 164 L 126 165 M 129 167 L 127 163"/>
              </g>
            </g>
          </g>

          <!-- CENTER EYE -->
          <circle class="center-eye-outer" id="centerEye" cx="180" cy="180" r="32"/>
          <circle class="center-eye-inner" id="centerEyeInner" cx="180" cy="180" r="14"/>

          <!-- ALIGNMENT MARKER (bottom) -->
          <polygon class="alignment-marker" id="alignMarker" points="180,355 175,342 185,342"/>
        </svg>
      </div>

      <!-- Control Panel -->
      <div class="control-panel">
        <button class="control-btn" id="btnLeft" onclick="rotateOuter('left')" disabled>
          <svg viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7"/></svg>
        </button>
        <button class="control-btn center-control" id="btnCenter" onclick="centerAction()" disabled>
          SPIN
        </button>
        <button class="control-btn" id="btnRight" onclick="rotateOuter('right')" disabled>
          <svg viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"/></svg>
        </button>
      </div>

      <!-- Rotation Counter -->
      <div class="rotation-counter" id="rotationCounter">
        <div class="rot-indicator" id="rot1">I</div>
        <div class="rot-indicator" id="rot2">II</div>
        <div class="rot-indicator" id="rot3">III</div>
      </div>

      <!-- Press Counter -->
      <div class="press-counter" id="pressCounter">
        <div class="press-dot" id="p1"></div>
        <div class="press-dot" id="p2"></div>
        <div class="press-dot" id="p3"></div>
        <div class="press-dot" id="p4"></div>
        <div class="press-dot" id="p5"></div>
        <div class="press-dot" id="p6"></div>
        <div class="press-dot" id="p7"></div>
        <div class="press-dot" id="p8"></div>
        <div class="press-dot" id="p9"></div>
      </div>
    </div>

    <!-- Message Log -->
    <div class="message-log">
      <div class="log-title">Manifestation Chronicle</div>
      <div id="logEntries">
        <div class="log-entry system">The dial rests in darkness, its surface cold as the void between stars...</div>
      </div>
    </div>

    <button class="reset-btn" onclick="resetDial()">↺ Reset Ritual</button>
  </div>

  <script>
    // ============== STATE ==============
    let mode = null; // 'dread' or 'ascended'
    let phase = 0; // 0: inactive, 1: outer ring, 2: middle ring spinning, 3: inner ring, 4: complete
    let outerRotation = 0;
    let middleRotation = 0;
    let rotationCount = 0;
    let pressCount = 0;
    let middleSpinning = false;
    let middleSpinInterval = null;
    let middleSpinSpeed = 0;

    // ============== AUDIO ==============
    let audioCtx = null;
    
    // Embedded audio files (base64)
    const AUDIO_GRIND = 'data:audio/mp3;base64,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VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//t0xL0D0KyW3G1l5cAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';

    function initAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      // Resume audio context if it's suspended (browser autoplay policy)
      if (audioCtx.state === 'suspended') {
        audioCtx.resume();
      }
    }

    // Pre-loaded audio elements for real sound files
    const grindAudio = new Audio(AUDIO_GRIND);
    grindAudio.volume = 0.7;

    function playGrind() {
      initAudio();
      // Clone and play for overlapping sounds
      const sound = grindAudio.cloneNode();
      sound.volume = 0.7;
      sound.play().catch(e => console.log('Audio play failed:', e));
    }

    function playBoneCrack() {
      initAudio();
      const t = audioCtx.currentTime;

      // Initial loud crack
      const osc1 = audioCtx.createOscillator();
      const gain1 = audioCtx.createGain();
      osc1.type = 'sawtooth';
      osc1.frequency.setValueAtTime(150, t);
      osc1.frequency.exponentialRampToValueAtTime(25, t + 0.1);
      gain1.gain.setValueAtTime(0.6, t);
      gain1.gain.exponentialRampToValueAtTime(0.01, t + 0.15);
      osc1.connect(gain1);
      gain1.connect(audioCtx.destination);
      osc1.start(t);
      osc1.stop(t + 0.15);

      // Secondary snap - louder
      const osc2 = audioCtx.createOscillator();
      const gain2 = audioCtx.createGain();
      osc2.type = 'square';
      osc2.frequency.setValueAtTime(250, t + 0.02);
      osc2.frequency.exponentialRampToValueAtTime(40, t + 0.12);
      gain2.gain.setValueAtTime(0.45, t + 0.02);
      gain2.gain.exponentialRampToValueAtTime(0.01, t + 0.18);
      osc2.connect(gain2);
      gain2.connect(audioCtx.destination);
      osc2.start(t + 0.02);
      osc2.stop(t + 0.18);

      // Third layer - deep thud
      const osc3 = audioCtx.createOscillator();
      const gain3 = audioCtx.createGain();
      osc3.type = 'sine';
      osc3.frequency.setValueAtTime(60, t);
      osc3.frequency.exponentialRampToValueAtTime(20, t + 0.2);
      gain3.gain.setValueAtTime(0.5, t);
      gain3.gain.exponentialRampToValueAtTime(0.01, t + 0.25);
      osc3.connect(gain3);
      gain3.connect(audioCtx.destination);
      osc3.start(t);
      osc3.stop(t + 0.25);

      // Loud crack noise burst
      const bufferSize = audioCtx.sampleRate * 0.15;
      const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);
      for (let i = 0; i < bufferSize; i++) {
        data[i] = (Math.random() * 2 - 1) * Math.exp(-i / (bufferSize * 0.03));
      }
      const noise = audioCtx.createBufferSource();
      const noiseGain = audioCtx.createGain();
      noise.buffer = buffer;
      noiseGain.gain.setValueAtTime(0.5, t);
      noise.connect(noiseGain);
      noiseGain.connect(audioCtx.destination);
      noise.start(t);
    }

    function playChime() {
      initAudio();
      const t = audioCtx.currentTime;
      const baseFreq = 600 + Math.random() * 100;

      // Multiple harmonics for rich bell sound - louder
      [1, 2, 3, 4, 5.5].forEach((mult, i) => {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'sine';
        osc.frequency.setValueAtTime(baseFreq * mult, t);
        const vol = 0.35 / (i + 1);
        const dur = 1.0 - i * 0.12;
        gain.gain.setValueAtTime(vol, t);
        gain.gain.exponentialRampToValueAtTime(0.001, t + dur);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start(t);
        osc.stop(t + dur);
      });

      // Add a subtle attack click for presence
      const click = audioCtx.createOscillator();
      const clickGain = audioCtx.createGain();
      click.type = 'triangle';
      click.frequency.setValueAtTime(2000, t);
      click.frequency.exponentialRampToValueAtTime(500, t + 0.02);
      clickGain.gain.setValueAtTime(0.2, t);
      clickGain.gain.exponentialRampToValueAtTime(0.001, t + 0.03);
      click.connect(clickGain);
      clickGain.connect(audioCtx.destination);
      click.start(t);
      click.stop(t + 0.03);
    }

    function playMetalSpin() {
      initAudio();
      const t = audioCtx.currentTime;

      // Whooshing rise
      const osc1 = audioCtx.createOscillator();
      const gain1 = audioCtx.createGain();
      osc1.type = 'sine';
      osc1.frequency.setValueAtTime(200, t);
      osc1.frequency.exponentialRampToValueAtTime(1200, t + 0.3);
      gain1.gain.setValueAtTime(0.25, t);
      gain1.gain.exponentialRampToValueAtTime(0.01, t + 0.35);
      osc1.connect(gain1);
      gain1.connect(audioCtx.destination);
      osc1.start(t);
      osc1.stop(t + 0.35);

      // Metallic shimmer
      const osc2 = audioCtx.createOscillator();
      const gain2 = audioCtx.createGain();
      osc2.type = 'triangle';
      osc2.frequency.setValueAtTime(800, t);
      osc2.frequency.exponentialRampToValueAtTime(2000, t + 0.2);
      gain2.gain.setValueAtTime(0.15, t);
      gain2.gain.exponentialRampToValueAtTime(0.01, t + 0.25);
      osc2.connect(gain2);
      gain2.connect(audioCtx.destination);
      osc2.start(t);
      osc2.stop(t + 0.25);

      // Friction whoosh noise
      const bufferSize = audioCtx.sampleRate * 0.3;
      const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);
      for (let i = 0; i < bufferSize; i++) {
        const env = Math.sin((i / bufferSize) * Math.PI);
        data[i] = (Math.random() * 2 - 1) * env * 0.3;
      }
      const noise = audioCtx.createBufferSource();
      const noiseGain = audioCtx.createGain();
      const noiseFilter = audioCtx.createBiquadFilter();
      noiseFilter.type = 'bandpass';
      noiseFilter.frequency.setValueAtTime(1000, t);
      noiseFilter.Q.setValueAtTime(1, t);
      noise.buffer = buffer;
      noiseGain.gain.setValueAtTime(0.2, t);
      noise.connect(noiseFilter);
      noiseFilter.connect(noiseGain);
      noiseGain.connect(audioCtx.destination);
      noise.start(t);
    }

    function playLock() {
      initAudio();
      const t = audioCtx.currentTime;

      if (mode === 'dread') {
        // Heavy metallic clunk
        const osc1 = audioCtx.createOscillator();
        const gain1 = audioCtx.createGain();
        osc1.type = 'sawtooth';
        osc1.frequency.setValueAtTime(100, t);
        osc1.frequency.exponentialRampToValueAtTime(20, t + 0.4);
        gain1.gain.setValueAtTime(0.6, t);
        gain1.gain.exponentialRampToValueAtTime(0.01, t + 0.5);
        osc1.connect(gain1);
        gain1.connect(audioCtx.destination);
        osc1.start(t);
        osc1.stop(t + 0.5);

        // Distorted crunch
        const osc2 = audioCtx.createOscillator();
        const gain2 = audioCtx.createGain();
        osc2.type = 'square';
        osc2.frequency.setValueAtTime(60, t);
        osc2.frequency.exponentialRampToValueAtTime(15, t + 0.3);
        gain2.gain.setValueAtTime(0.4, t);
        gain2.gain.exponentialRampToValueAtTime(0.01, t + 0.35);
        osc2.connect(gain2);
        gain2.connect(audioCtx.destination);
        osc2.start(t);
        osc2.stop(t + 0.35);

        // Impact noise
        const bufferSize = audioCtx.sampleRate * 0.2;
        const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
        const data = buffer.getChannelData(0);
        for (let i = 0; i < bufferSize; i++) {
          data[i] = (Math.random() * 2 - 1) * Math.exp(-i / (bufferSize * 0.05));
        }
        const noise = audioCtx.createBufferSource();
        const noiseGain = audioCtx.createGain();
        noise.buffer = buffer;
        noiseGain.gain.setValueAtTime(0.4, t);
        noise.connect(noiseGain);
        noiseGain.connect(audioCtx.destination);
        noise.start(t);
      } else {
        // Ascending chord with more presence
        [400, 500, 600, 800, 1000].forEach((freq, i) => {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          osc.type = 'sine';
          osc.frequency.setValueAtTime(freq, t + i * 0.04);
          gain.gain.setValueAtTime(0.25, t + i * 0.04);
          gain.gain.exponentialRampToValueAtTime(0.01, t + 0.8 + i * 0.04);
          osc.connect(gain);
          gain.connect(audioCtx.destination);
          osc.start(t + i * 0.04);
          osc.stop(t + 0.9 + i * 0.04);
        });

        // Shimmer overlay
        const shimmer = audioCtx.createOscillator();
        const shimmerGain = audioCtx.createGain();
        shimmer.type = 'triangle';
        shimmer.frequency.setValueAtTime(2000, t);
        shimmerGain.gain.setValueAtTime(0.1, t);
        shimmerGain.gain.exponentialRampToValueAtTime(0.01, t + 0.5);
        shimmer.connect(shimmerGain);
        shimmerGain.connect(audioCtx.destination);
        shimmer.start(t);
        shimmer.stop(t + 0.5);
      }
    }

    function playPress() {
      initAudio();
      const t = audioCtx.currentTime;

      if (mode === 'dread') {
        // Deep thud that gets deeper with each press
        const osc1 = audioCtx.createOscillator();
        const gain1 = audioCtx.createGain();
        osc1.type = 'square';
        osc1.frequency.setValueAtTime(60 + pressCount * 8, t);
        osc1.frequency.exponentialRampToValueAtTime(25, t + 0.25);
        gain1.gain.setValueAtTime(0.4, t);
        gain1.gain.exponentialRampToValueAtTime(0.01, t + 0.3);
        osc1.connect(gain1);
        gain1.connect(audioCtx.destination);
        osc1.start(t);
        osc1.stop(t + 0.3);

        // Static crackle
        const osc2 = audioCtx.createOscillator();
        const gain2 = audioCtx.createGain();
        osc2.type = 'sawtooth';
        osc2.frequency.setValueAtTime(100, t);
        osc2.frequency.exponentialRampToValueAtTime(40, t + 0.15);
        gain2.gain.setValueAtTime(0.25, t);
        gain2.gain.exponentialRampToValueAtTime(0.01, t + 0.2);
        osc2.connect(gain2);
        gain2.connect(audioCtx.destination);
        osc2.start(t);
        osc2.stop(t + 0.2);
      } else {
        // Ascending tone that gets higher with each press
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'sine';
        osc.frequency.setValueAtTime(400 + pressCount * 60, t);
        gain.gain.setValueAtTime(0.3, t);
        gain.gain.exponentialRampToValueAtTime(0.01, t + 0.4);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start(t);
        osc.stop(t + 0.4);

        // Harmonic overlay
        const harm = audioCtx.createOscillator();
        const harmGain = audioCtx.createGain();
        harm.type = 'triangle';
        harm.frequency.setValueAtTime((400 + pressCount * 60) * 2, t);
        harmGain.gain.setValueAtTime(0.15, t);
        harmGain.gain.exponentialRampToValueAtTime(0.01, t + 0.3);
        harm.connect(harmGain);
        harmGain.connect(audioCtx.destination);
        harm.start(t);
        harm.stop(t + 0.3);
      }
    }

    // ============== UI UPDATES ==============
    function updateUI() {
      const phaseLabel = document.getElementById('phaseLabel');
      const instructionText = document.getElementById('instructionText');
      const instructionHint = document.getElementById('instructionHint');
      const btnLeft = document.getElementById('btnLeft');
      const btnRight = document.getElementById('btnRight');
      const btnCenter = document.getElementById('btnCenter');
      const rotCounter = document.getElementById('rotationCounter');
      const pressCounter = document.getElementById('pressCounter');
      const centerEye = document.getElementById('centerEye');
      const centerEyeInner = document.getElementById('centerEyeInner');

      // Reset states
      btnLeft.disabled = true;
      btnRight.disabled = true;
      btnCenter.disabled = true;
      btnLeft.classList.remove('active');
      btnRight.classList.remove('active');
      btnCenter.classList.remove('active');
      rotCounter.classList.remove('visible');
      pressCounter.classList.remove('visible');
      centerEye.classList.remove('clickable');
      centerEyeInner.classList.remove('active');

      if (!mode) {
        phaseLabel.textContent = '— Awaiting Activation —';
        instructionText.innerHTML = 'Choose a ritual to begin the summoning.';
        instructionHint.textContent = 'The dial hungers. The dial waits.';
        btnCenter.textContent = 'SPIN';
        return;
      }

      if (phase === 1) {
        phaseLabel.textContent = 'Phase 1: THE PRIME';
        rotCounter.classList.add('visible');
        
        if (mode === 'dread') {
          instructionText.innerHTML = 'Turn the Outer Ring <strong>WIDDERSHINS</strong> (counter-clockwise)';
          instructionHint.textContent = `Click the LEFT arrow. Rotation ${rotationCount}/3`;
          btnLeft.disabled = false;
          btnLeft.classList.add('active');
        } else {
          instructionText.innerHTML = 'Turn the Outer Ring <strong>DEOSIL</strong> (clockwise)';
          instructionHint.textContent = `Click the RIGHT arrow. Rotation ${rotationCount}/3`;
          btnRight.disabled = false;
          btnRight.classList.add('active');
        }
        btnCenter.textContent = 'SPIN';

      } else if (phase === 2) {
        phaseLabel.textContent = 'Phase 2: THE TUNE';
        
        if (!middleSpinning) {
          instructionText.innerHTML = 'Press <strong>SPIN</strong> to release the Frequency Ring';
          instructionHint.textContent = 'The smooth metal awaits your touch.';
          btnCenter.textContent = 'SPIN';
        } else {
          instructionText.innerHTML = 'Press <strong>CATCH</strong> to lock the alignment!';
          const targetGlyph = mode === 'dread' ? 'bottom' : 'top';
          instructionHint.textContent = `Align the glowing glyph with the ${targetGlyph} marker.`;
          btnCenter.textContent = 'CATCH';
        }
        btnCenter.disabled = false;
        btnCenter.classList.add('active');

      } else if (phase === 3) {
        phaseLabel.textContent = 'Phase 3: THE PIERCE';
        pressCounter.classList.add('visible');
        centerEye.classList.add('clickable');
        
        instructionText.innerHTML = 'Press the <strong>CENTER EYE</strong> nine times';
        instructionHint.textContent = `Press ${pressCount}/9 — ${getPressPhase()}`;
        
        btnCenter.textContent = 'PRESS';
        btnCenter.disabled = false;
        btnCenter.classList.add('active');

      } else if (phase === 4) {
        phaseLabel.textContent = '⛧ THE LOCK ⛧';
        centerEyeInner.classList.add('active');
        
        if (mode === 'dread') {
          instructionText.innerHTML = '<strong>THE DREAD SPEAKS THROUGH YOU</strong>';
          instructionHint.textContent = 'Your voice is no longer your own.';
        } else {
          instructionText.innerHTML = '<strong>THE OTHERS SING THE WORD</strong>';
          instructionHint.textContent = 'The Song fills every corner of your being.';
        }
        btnCenter.textContent = '◉';
      }
    }

    function getPressPhase() {
      if (pressCount < 3) return mode === 'dread' ? 'Decay • Death' : 'Beginning • Birth';
      if (pressCount < 6) return mode === 'dread' ? 'Chaos • Disease' : 'Balance • Body';
      return mode === 'dread' ? 'Void • Nothingness' : 'Spirit • Transcendence';
    }

    function addLog(msg, type = 'system') {
      const entries = document.getElementById('logEntries');
      const entry = document.createElement('div');
      entry.className = `log-entry ${type}`;
      entry.textContent = msg;
      entries.appendChild(entry);
      entries.parentElement.scrollTop = entries.parentElement.scrollHeight;
    }

    function shake() {
      document.body.classList.add('shaking');
      setTimeout(() => document.body.classList.remove('shaking'), 150);
    }

    // ============== MODE SELECTION ==============
    function setMode(newMode) {
      mode = newMode;
      phase = 1;
      outerRotation = 0;
      middleRotation = 0;
      rotationCount = 0;
      pressCount = 0;
      middleSpinning = false;

      document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
      document.querySelector(`.mode-btn.${mode}`).classList.add('active');
      document.body.classList.remove('dread-active', 'ascended-active');
      document.body.classList.add(`${mode}-active`);

      // Reset visuals
      document.getElementById('outerRing').style.transform = '';
      document.getElementById('middleRing').style.transform = '';
      document.querySelectorAll('.blood-channel').forEach(c => c.classList.remove('filling', 'filled'));
      document.querySelectorAll('.outer-glyph').forEach(g => g.classList.remove('active'));
      document.querySelectorAll('.middle-glyph').forEach(g => g.classList.remove('target', 'aligned'));
      document.querySelectorAll('.rot-indicator').forEach(r => r.classList.remove('filled'));
      document.querySelectorAll('.press-dot').forEach(p => p.classList.remove('filled'));

      // Set target glyph
      const targetId = mode === 'dread' ? 'mg4' : 'mg1';
      document.getElementById(targetId).classList.add('target');

      updateUI();

      if (mode === 'dread') {
        addLog('The temperature plummets. Frost forms on the dial\'s surface.', 'dread');
        addLog('Your blood calls to the channels. The ritual begins.', 'system');
      } else {
        addLog('Light gathers at the edges of perception. The air tastes of ozone.', 'ascended');
        addLog('Surrender your ego. The ritual begins.', 'system');
      }
    }

    // ============== OUTER RING ROTATION ==============
    function rotateOuter(direction) {
      if (phase !== 1) return;

      const correctDir = (mode === 'dread' && direction === 'left') || 
                         (mode === 'ascended' && direction === 'right');
      if (!correctDir) return;

      playGrind();

      // Rotate by 120 degrees (1/3 of full rotation)
      const delta = direction === 'left' ? -120 : 120;
      outerRotation += delta;

      document.getElementById('outerRing').style.transform = `rotate(${outerRotation}deg)`;
      document.getElementById('outerRing').style.transformOrigin = '180px 180px';

      // Check for completed rotation
      const completedRotations = Math.floor(Math.abs(outerRotation) / 360);
      
      if (completedRotations > rotationCount) {
        rotationCount = completedRotations;
        
        // Fill blood channel
        for (let i = 1; i <= rotationCount * 3 && i <= 8; i++) {
          document.getElementById(`bc${i}`).classList.add('filled');
        }

        // Light up rotation indicator
        document.getElementById(`rot${rotationCount}`).classList.add('filled');

        // Light up outer glyphs
        for (let i = 1; i <= rotationCount * 3; i++) {
          document.getElementById(`og${i}`).classList.add('active');
        }

        shake();

        if (mode === 'dread') {
          playBoneCrack();
          addLog(`Rotation ${rotationCount}: CRACK — The sound of breaking bone fills your skull.`, 'dread');
        } else {
          playChime();
          addLog(`Rotation ${rotationCount}: CHIME — Crystal resonance floods your chest.`, 'ascended');
        }

        // Check for phase completion
        if (rotationCount >= 3) {
          setTimeout(() => {
            phase = 2;
            addLog('═══════════════════════════════', 'system');
            addLog('THE PRIME IS COMPLETE.', mode);
            addLog('The blood channels overflow. The outer ring locks.', 'warning');
            updateUI();
          }, 500);
        } else {
          document.getElementById('instructionHint').textContent = 
            `Rotation ${rotationCount}/3 complete. ${3 - rotationCount} remaining.`;
        }
      }
    }

    // ============== MIDDLE RING SPINNING ==============
    function centerAction() {
      if (phase === 2) {
        if (!middleSpinning) {
          startMiddleSpin();
        } else {
          catchMiddleRing();
        }
      } else if (phase === 3) {
        pressInner();
      }
    }

    function startMiddleSpin() {
      middleSpinning = true;
      middleSpinSpeed = 15; // degrees per frame
      playMetalSpin();
      addLog('The frequency ring spins freely — almost frictionless.', 'system');
      updateUI();

      middleSpinInterval = setInterval(() => {
        middleRotation = (middleRotation + middleSpinSpeed) % 360;
        document.getElementById('middleRing').style.transform = `rotate(${middleRotation}deg)`;
        document.getElementById('middleRing').style.transformOrigin = '180px 180px';

        // Gradually slow down slightly for drama
        if (middleSpinSpeed > 8) {
          middleSpinSpeed *= 0.998;
        }
      }, 16);
    }

    function catchMiddleRing() {
      clearInterval(middleSpinInterval);
      middleSpinning = false;

      // Check alignment - target is at 180° for dread (bottom), 0° for ascended (top)
      const targetAngle = mode === 'dread' ? 180 : 0;
      const tolerance = 25;
      
      let diff = Math.abs(middleRotation - targetAngle);
      if (diff > 180) diff = 360 - diff;

      const aligned = diff <= tolerance;

      if (aligned) {
        playLock();
        shake();
        
        // Snap to exact position
        middleRotation = targetAngle;
        document.getElementById('middleRing').style.transform = `rotate(${middleRotation}deg)`;
        
        const targetId = mode === 'dread' ? 'mg4' : 'mg1';
        document.getElementById(targetId).classList.remove('target');
        document.getElementById(targetId).classList.add('aligned');

        addLog('═══════════════════════════════', 'system');
        addLog('ALIGNMENT ACHIEVED — The frequency locks!', mode);
        
        if (mode === 'dread') {
          addLog('The blood fuses with the mechanism. Heat builds.', 'warning');
          addLog('A scream begins inside your skull...', 'dread');
        } else {
          addLog('Harmonic resonance achieved. Light pools in the channels.', 'holy');
          addLog('A choir begins to sing from within...', 'ascended');
        }

        setTimeout(() => {
          phase = 3;
          updateUI();
        }, 800);
      } else {
        // Missed - ring keeps spinning but slower
        addLog('The ring slips through your fingers! Try again.', 'warning');
        middleSpinSpeed = 10;
        startMiddleSpin();
      }
    }

    // ============== INNER RING PRESS ==============
    function pressInner() {
      if (phase !== 3) return;

      pressCount++;
      playPress();
      shake();

      document.getElementById(`p${pressCount}`).classList.add('filled');
      document.getElementById(`ig${pressCount}`).classList.add('active');

      const messages = mode === 'dread' ? [
        'A cold pulse. The void opens slightly.',
        'Darkness seeps from the dial.',
        'DECAY — Your hand fuses to the surface.',
        'Chaos energy floods your veins.',
        'Something ancient stirs.',
        'DISEASE — Blood pools beneath you.',
        'Reality tears at the edges.',
        'The whispers become screams.',
        'NOTHINGNESS — The Dread answers...'
      ] : [
        'A warm pulse. Light gathers.',
        'The Song begins, distant but beautiful.',
        'BIRTH — You feel connected to everything.',
        'Balance flows through you.',
        'Joy overwhelms your senses.',
        'BODY — You are whole.',
        'Transcendence approaches.',
        'The choir crescendos.',
        'SPIRIT — The Others sing The Word...'
      ];

      const logType = pressCount % 3 === 0 ? 'warning' : mode;
      addLog(`Press ${pressCount}: ${messages[pressCount - 1]}`, logType);

      document.getElementById('instructionHint').textContent = 
        `Press ${pressCount}/9 — ${getPressPhase()}`;

      if (pressCount >= 9) {
        setTimeout(completeLock, 500);
      }
    }

    // ============== COMPLETION ==============
    function completeLock() {
      phase = 4;
      playLock();
      shake();
      updateUI();

      addLog('═══════════════════════════════', 'system');
      addLog('THE LOCK IS COMPLETE', mode === 'dread' ? 'danger' : 'holy');

      setTimeout(() => {
        if (mode === 'dread') {
          showCall('W̷E̸ ̵H̷A̶V̵E̷ ̸W̶A̷I̵T̴E̸D̵.̷ ̶W̵E̶ ̴H̸A̶V̵E̶ ̷H̸U̴N̵G̶E̷R̸E̶D̵.̷ ̶Y̴O̸U̵R̶ ̷F̶L̷E̸S̵H̵ ̴I̸S̷ ̵O̴U̶R̷ ̴V̷E̸S̵S̵E̴L̵ ̶N̸O̷W̵.̸ ̷W̸E̴ ̵S̵E̷E̵ ̵T̸H̷R̶O̷U̸G̵H̶ ̸Y̴O̷U̶R̷ ̵E̷Y̸E̵S̷.̴ ̶W̷E̷ ̵S̶P̸E̸A̶K̷ ̸W̵I̷T̶H̴ ̶Y̵O̵U̷R̵ ̵T̴O̵N̵G̵U̴E̸.̷');
        } else {
          showCall('You are not alone. You have never been alone. Before the first star ignited, we sang. When the last light fades, we will still be singing. You are a note in an infinite symphony. Welcome home, beloved child of light. The Song remembers you.');
        }
      }, 1000);
    }

    function showCall(message) {
      const overlay = document.getElementById('callOverlay');
      document.getElementById('callMessage').textContent = message;
      overlay.className = `call-overlay ${mode} active`;
    }

    function dismissCall() {
      document.getElementById('callOverlay').className = 'call-overlay';
      addLog('The connection severs. Silence returns.', 'system');
      addLog('You are forever changed.', 'warning');
    }

    // ============== RESET ==============
    function resetDial() {
      if (middleSpinInterval) clearInterval(middleSpinInterval);
      
      mode = null;
      phase = 0;
      outerRotation = 0;
      middleRotation = 0;
      rotationCount = 0;
      pressCount = 0;
      middleSpinning = false;

      document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
      document.body.classList.remove('dread-active', 'ascended-active');

      document.getElementById('outerRing').style.transform = '';
      document.getElementById('middleRing').style.transform = '';
      document.querySelectorAll('.blood-channel').forEach(c => c.classList.remove('filling', 'filled'));
      document.querySelectorAll('.outer-glyph').forEach(g => g.classList.remove('active'));
      document.querySelectorAll('.middle-glyph').forEach(g => g.classList.remove('target', 'aligned'));
      document.querySelectorAll('.inner-glyph').forEach(g => g.classList.remove('active'));
      document.querySelectorAll('.rot-indicator').forEach(r => r.classList.remove('filled'));
      document.querySelectorAll('.press-dot').forEach(p => p.classList.remove('filled'));

      updateUI();
      document.getElementById('logEntries').innerHTML = 
        '<div class="log-entry system">The dial rests in darkness, its surface cold as the void between stars...</div>';
    }

    // Initialize
    updateUI();
  </script>
</body>
</html>
